/*!
 * PSPDFKit for Web 2022.5.5 (https://pspdfkit.com/web)
 *
 * Copyright (c) 2016-2022 PSPDFKit GmbH. All rights reserved.
 *
 * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW
 * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.
 * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.
 * This notice may not be removed from this file.
 *
 * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/
 */
(globalThis.webpackChunkPSPDFKit=globalThis.webpackChunkPSPDFKit||[]).push([[3610],{72098:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(42876),o=r.n(n),i=r(35369),s=r(70545),a=r(63880);const u=()=>{};class c{_worker=new(o());_requests=(0,i.D5)();_nextRequestId=1;_isLoading=!0;_loadPromise=null;_initPromise=null;_hasOpenedDocument=!1;_hasLoadedCertificates=!1;constructor(){this._worker.onmessage=this._handleMessage}loadNativeModule(t,e){let{mainThreadOrigin:r,disableWebAssembly:n,disableWebAssemblyStreaming:o,enableAutomaticLinkExtraction:i,overrideMemoryLimit:a}=e;return(0,s.kG)(!this._hasOpenedDocument,"cannot invoke `loadNativeModule` while an instance is still in use. Please call `recycle` first."),this._loadPromise?this._loadPromise.then((()=>{})):(this._initPromise||(this._initPromise=this._sendRequest("loadNativeModule",[t,{mainThreadOrigin:r,disableWebAssembly:n,disableWebAssemblyStreaming:o,enableAutomaticLinkExtraction:i,overrideMemoryLimit:a}]).then((t=>t)).catch((t=>{throw this._isLoading=!1,this._worker.terminate(),t}))),this._initPromise)}load(t,e,r){let{mainThreadOrigin:n,customFonts:o,isSharePoint:i,isSalesforce:a}=r;return(0,s.kG)(!this._hasOpenedDocument,"cannot invoke `load` while an instance is still in use. Please call `recycle` first."),this._loadPromise||(this._loadPromise=this._sendRequest("load",[t,e,{mainThreadOrigin:n,customFonts:o,isSharePoint:i,isSalesforce:a}]).then((t=>(this._isLoading=!1,t))).catch((t=>{throw this._isLoading=!1,this._worker.terminate(),t}))),this._loadPromise}version(){return this._assertLoaded(),this._sendRequest("version")}openDocument(t,e,r){return this._assertLoaded(),this._hasOpenedDocument=!0,this._sendRequest("openDocument",[t,e,r]).catch((t=>{throw this._hasOpenedDocument=!1,t}))}async openDocumentAt(){throw new Error("Should never be called")}async getAllPageInfos(t){return this._assertLoaded(),this._sendRequest("getAllPageInfos",[t])}async enablePDFJavaScriptSupport(){return this._assertLoaded(),this._sendRequest("enablePDFJavaScriptSupport")}async runPDFFormattingScripts(t,e){return this._assertLoaded(),this._sendRequest("runPDFFormattingScripts",[t,e])}getBookmarks(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getBookmarks")}getFormJSON(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getFormJSON")}evalFormValuesActions(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("evalFormValuesActions",[t])}evalScript(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("evalScript",[t,e])}setFormJSONUpdateBatchMode(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("setFormJSONUpdateBatchMode",[t])}getFormValues(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getFormValues")}closeDocument(){return this._assertLoaded(),this._hasOpenedDocument=!1,this._sendRequest("closeDocument")}renderTile(t,e,r,n,o,i,s,a){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderTile",[t,e,r,n,o,i,s,a])}renderAnnotation(t,e,r,n,o,i){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderAnnotation",[t,e,r,n,o,i])}renderPageAnnotations(t,e,r,n,o){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderPageAnnotations",[t,e,r,n,o])}renderDetachedAnnotation(t,e,r,n,o){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderDetachedAnnotation",[t,e,r,n,o])}onKeystrokeEvent(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("onKeystrokeEvent",[t])}getAttachment(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getAttachment",[t])}textForPageIndex(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("textForPageIndex",[t])}annotationsForPageIndex(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("annotationsForPageIndex",[t])}createAnnotation(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("createAnnotation",[t,e])}updateAnnotation(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("updateAnnotation",[t])}deleteAnnotation(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteAnnotation",[t])}createFormField(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("createFormField",[t,e])}updateFormField(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("updateFormField",[t,e])}deleteFormField(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteFormField",[t])}setFormFieldValue(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("setFormFieldValue",[t])}deleteFormFieldValue(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteFormFieldValue",[t])}createBookmark(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("createBookmark",[t])}updateBookmark(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("updateBookmark",[t])}deleteBookmark(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteBookmark",[t])}getTextFromRects(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getTextFromRects",[t,e])}search(t,e,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.S.TEXT;return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("search",[t,e,r,n,o])}getMeasurementSnappingPoints(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getMeasurementSnappingPoints",[t])}parseXFDF(t){return this._sendRequest("parseXFDF",[t])}getEmbeddedFilesList(){return this._sendRequest("getEmbeddedFilesList")}exportFile(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pdf",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportFile",[t,e,r,n,o,i])}importXFDF(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("importXFDF",[t,e])}exportXFDF(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportXFDF",[])}importInstantJSON(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("importInstantJSON",[t])}exportInstantJSON(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportInstantJSON",[])}getDocumentOutline(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getDocumentOutline")}applyOperations(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("applyOperations",[t,e])}reloadDocument(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("reloadDocument")}exportPDFWithOperations(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportPDFWithOperations",[t,e])}loadCertificates(t){return this._assertLoaded(),this._assertDocumentOpen(),this._hasLoadedCertificates=Boolean(t.length),this._sendRequest("loadCertificates",[t]).catch((t=>{throw this._hasLoadedCertificates=!1,t}))}getSignaturesInfo(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getSignaturesInfo",[])}prepareSignInvisible(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("prepareSignInvisible",[t,e])}sign(t,e,r){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("sign",[t,e,r])}restoreToOriginalState(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("restoreToOriginalState")}applyRedactions(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("applyRedactions",[])}readFormJSONObjects(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("readFormJSONObjects")}clearAPStreamCache(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("clearAPStreamCache")}setComparisonDocument(t,e){return this._assertLoaded(),e||this._assertDocumentOpen(),this._sendRequest("setComparisonDocument",[t,e])}openComparisonDocument(t){return this._assertLoaded(),this._hasOpenedDocument=!0,this._sendRequest("openComparisonDocument",[t]).catch((t=>{throw this._hasOpenedDocument=!1,t}))}documentCompareAndOpen(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("documentCompareAndOpen",[t])}persistOpenDocument(t){return this._assertLoaded(),t||this._assertDocumentOpen(),this._sendRequest("persistOpenDocument",[t])}cleanupDocumentComparison(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("cleanupDocumentComparison")}contentEditorEnter(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorEnter",[])}contentEditorExit(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorExit",[])}contentEditorGetTextBlocks(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorGetTextBlocks",[t])}contentEditorRenderTextBlock(t,e,r){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorRenderTextBlock",[t,e,r])}contentEditorSetTextBlockCursor(t,e,r,n){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorSetTextBlockCursor",[t,e,r,n])}contentEditorMoveTextBlockCursor(t,e,r,n){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorMoveTextBlockCursor",[t,e,r,n])}contentEditorInsertTextBlockString(t,e,r){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorInsertTextBlockString",[t,e,r])}contentEditorDeleteTextBlockString(t,e,r){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorDeleteTextBlockString",[t,e,r])}contentEditorSetTextBlockSelection(t,e,r){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorSetTextBlockSelection",[t,e,r])}contentEditorSetTextBlockSelectionRange(t,e,r,n,o){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorSetTextBlockSelectionRange",[t,e,r,n,o])}contentEditorTextBlockUndo(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorTextBlockUndo",[t,e])}contentEditorTextBlockRedo(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorTextBlockRedo",[t,e])}contentEditorTextBlockApplyFormat(t,e,r){return this._sendRequest("contentEditorTextBlockApplyFormat",[t,e,r])}contentEditorGetAvailableFaces(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorGetAvailableFaces",[])}contentEditorResolveFace(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorResolveFace",[t,e])}contentEditorSave(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("contentEditorSave",[t])}recycle(){this._hasLoadedCertificates&&this.loadCertificates([]),this._hasOpenedDocument&&this.closeDocument(),this._isLoading||(this._requests=this._requests.map((()=>({resolve:u,reject:u}))))}destroy(){this._loadPromise=null,this._worker.terminate()}_assertLoaded(){if(this._isLoading)throw new s.p2("CoreClient not yet initialized")}_assertDocumentOpen(){if(!this._hasOpenedDocument)throw new s.p2("This method can not be called since there is no open document. Have you run PSPDFKit.unload()?")}_handleMessage=t=>{const e=t.data,r=this._requests.get(e.id);(0,s.kG)(r,`No request was made for id ${e.id}.`);const{resolve:n,reject:o}=r;if(this._requests=this._requests.delete(e.id),e.error){const t=new s.p2(e.error);t.callArgs=e.callArgs,o(t)}else n(e.result)};_sendRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(((r,n)=>{const o=this._assignId(),i=e.filter((t=>t instanceof ArrayBuffer));this._worker.postMessage({id:o,action:t,args:e},i),this._requests=this._requests.set(o,{resolve:r,reject:n})}))}_assignId(){const t=this._nextRequestId;return this._nextRequestId=this._nextRequestId+1,t}}},29412:(t,e,r)=>{"use strict";r.d(e,{W:()=>a});var n=r(35369),o=r(33502),i=r(70545),s=r(50893);class a{cachedAPStreams=(0,n.D5)();pageAPStreamsPromises=(0,n.D5)();annotationAPStreamPromises=(0,n.D5)();cachedRenderAnnotation(t,e,r,n,a){var u;const c=this.provider;(0,i.kG)(c instanceof c.constructor,"Backend can only use backend annotation provider");const l=t instanceof o.x_?null===(u=c._readStateCallbacks)||void 0===u?void 0:u.getFormFieldByName(t.formFieldName):null,h=!l||l instanceof o.Yo?null:new o.KD({name:l.name,value:void 0!==l.formattedValue?l.formattedValue:"string"==typeof l.value?l.value:l.values});if(!(0,s._R)(t,l))return this.renderAnnotation(t,h,e,r,n,a);let d=!1,f=()=>{d=!0};return{promise:new Promise((async(o,i)=>{const s=e=>{const r=this.annotationAPStreamPromises.get(t.id);r&&(this.annotationAPStreamPromises=this.annotationAPStreamPromises.delete(t.id),r(e))},u=this.annotationAPStreamPromises.get(t.id);this.annotationAPStreamPromises=this.annotationAPStreamPromises.set(t.id,o),u&&u(null);try{const i=this.pageAPStreamsPromises.get(t.pageIndex);if(!i){const e=new Promise((e=>{this.annotationAPStreamPromises=this.annotationAPStreamPromises.set(t.id,e)}));return void o(await e)}await i;const u=this.cachedAPStreams.get(t.pageIndex);if(u&&!a){const e=u?u.get(t.id):null;if(e)return void s(e)}const{promise:c,cancel:l}=this.renderAnnotation(t,h,e,r,n,a);if(d)s(null);else{f=l;const e=await c;s(e),e&&!a&&this.cacheAPStream(e,t)}}catch(t){i(t)}})),cancel:f}}cacheAPStream(t,e){let r=this.cachedAPStreams.get(e.pageIndex);r||(this.cachedAPStreams=this.cachedAPStreams.set(e.pageIndex,(0,n.D5)()),r=this.cachedAPStreams.get(e.pageIndex)),(0,i.kG)(r),this.cachedAPStreams=this.cachedAPStreams.setIn([e.pageIndex,e.id],t)}clearAllPageAPStreams(t){const e=this.cachedAPStreams.get(t);e&&(e.forEach((t=>{t.release()})),this.cachedAPStreams=this.cachedAPStreams.delete(t)),this.pageAPStreamsPromises=this.pageAPStreamsPromises.delete(t)}clearPageAPStreams(t,e){const r=this.cachedAPStreams.get(t);r&&(r.filter(((t,r)=>e.has(r))).forEach((t=>{t.release()})),this.cachedAPStreams=this.cachedAPStreams.updateIn([t],(t=>t.filter(((t,r)=>!e.has(r))))))}}},46777:(t,e,r)=>{"use strict";r.r(e),r.d(e,{corePool:()=>N,customFontsPromiseRef:()=>Q,default:()=>H,loadModule:()=>X,normalizeCoreOptions:()=>J,validateStandaloneConfiguration:()=>$});var n=r(14968),o=r(35369),i=r(70545),s=r(24956),a=r(19491),u=r(50893),c=r(29412),l=r(89595),h=r(80614),d=r(89777),f=r(41371),p=r(81928),m=r(57106),_=r(10163),y=r(51983),g=r(33502);class v extends((0,o.WV)({alreadyLoadedPages:(0,o.D5)(),isLoaded:!1,isDestroyed:!1})){}const b={skippedPdfObjectIds:[],skippedPdfBookmarkIds:[],annotations:[],bookmarks:[],formFieldValues:[],formFields:[],attachments:{}};class w{_state=new v;_formFieldsLoadedPromise=null;_objectCreationPromises=(0,o.D5)();_loadBookmarksPromise=null;canCreateBackendOrphanWidgets=!1;constructor(t,e){this._core=t,this._json=e?S(e):null,this._setReadStateCallbacksPromise=new Promise((t=>{this._setReadStateCallbacksPromiseResolve=t}))}async load(){if(this._state=this._state.set("isLoaded",!0),!this._formFieldCallbacks&&await this._loadFormFieldValues(),!this._json)return this;await this._core.importInstantJSON({...b,...this._json}),(0,i.kG)(this._json);const{annotations:t,attachments:e}=this._json;if(this._isDestroyed()||!e||0===Object.entries(e).length)return this;if(t)for(let r=0;r<t.length;r++){let n=null;if(t[r].imageAttachmentId){const o=e?e[t[r].imageAttachmentId]:null;if(o)try{n=(0,m.Jc)(atob(o.binary),o.contentType),(0,i.kG)(this._annotationCallbacks),this._annotationCallbacks.createAttachment(t[r].imageAttachmentId,n)}catch(e){(0,i.um)(`Skipped attachment with id ${t[r].imageAttachmentId} from payload because an error occurred while converting the binary image to blob.`),(0,i.um)(e)}}}return this}destroy(){this._state=this._state.set("isDestroyed",!0),this._annotationCallbacks=null,this._readStateCallbacks=null,this._bookmarkCallbacks=null,this._formFieldCallbacks=null,this._formFieldValueCallbacks=null}setReadStateCallbacks(t){var e;this._readStateCallbacks=t,null===(e=this._setReadStateCallbacksPromiseResolve)||void 0===e||e.call(this)}setAnnotationCallbacks(t){this._annotationCallbacks=t}setBookmarkCallbacks(t){this._bookmarkCallbacks=t}setFormFieldCallbacks(t){this._formFieldCallbacks=t}setFormFieldValueCallbacks(t){this._formFieldValueCallbacks=t}setCommentCallbacks(){}createComment(){return Promise.reject("Comments are not supported in Standalone.")}deleteComment(){return Promise.reject("Comments are not supported in Standalone.")}updateComment(){return Promise.reject("Comments are not supported in Standalone.")}createAnnotation(t,e){this._verifyLoaded();const r=e.find(((e,r)=>r===t.imageAttachmentId));return this._core.createAnnotation((0,f.Hs)(t),r?r.data:null).then((e=>{"number"!=typeof e||"number"!=typeof t.pdfObjectId||t.pdfObjectId===e||this._isDestroyed()||((0,i.kG)(this._annotationCallbacks),this._annotationCallbacks.updateAnnotations((0,o.aV)([t.set("pdfObjectId",e)])))}))}updateAnnotation(t){return this._verifyLoaded(),this._core.updateAnnotation((0,f.Hs)(t))}deleteAnnotation(t){return this._verifyLoaded(),this._core.deleteAnnotation((0,f.Hs)(t))}createBookmark(t){return this._verifyLoaded(),this._core.createBookmark((0,p.a)(t))}updateBookmark(t){return this._verifyLoaded(),this._core.updateBookmark((0,p.a)(t))}deleteBookmark(t){return this._verifyLoaded(),this._core.deleteBookmark(t)}createFormField(t){this._verifyLoaded(),(0,i.kG)(this._readStateCallbacks);const e=this._readStateCallbacks.getFormFieldWidgets(t);return this._core.createFormField((0,f.vD)(t),e.map(f.Hs).toArray())}updateFormField(t){this._verifyLoaded(),(0,i.kG)(this._readStateCallbacks);const e=this._readStateCallbacks.getFormFieldWidgets(t);return this._core.updateFormField((0,f.vD)(t),e.map(f.Hs).toArray())}deleteFormField(t){return this._verifyLoaded(),this._core.deleteFormField((0,f.vD)(t))}loadFormFields(){return this._formFieldsLoadedPromise||(this._formFieldsLoadedPromise=this._loadFormFields()),this._formFieldsLoadedPromise}async _loadFormFields(){this._verifyLoaded();const t=await this._core.readFormJSONObjects();let e=(0,o.aV)(),r=(0,o.aV)().withMutations((r=>{t.forEach((t=>{const{formField:n,widgets:o,value:s}=t;try{let t;t=n.pdfObjectId?n.pdfObjectId.toString():(0,u.xc)();const a=(0,f.IN)(t,n);(0,i.kG)(this._readStateCallbacks),this._readStateCallbacks.isFormFieldInState(a.name)||r.push(a.set("value",s)),o.forEach((t=>{let r;if(r=t.pdfObjectId?t.id||t.pdfObjectId.toString():(0,u.xc)(),(0,i.kG)(this._readStateCallbacks),!this._readStateCallbacks.isAnnotationInState(r)){const n=(0,f.vH)(r,t);e=e.push(n)}}))}catch(t){(0,i.um)(`Skipped creating form field #${n.pdfObjectId} from payload because an error occurred while deserializing.`),(0,i.um)(t)}}))}));e=e.map((t=>{if(e.find((e=>e.pdfObjectId!==t.pdfObjectId&&e.id===t.id&&t.pdfObjectId.toString()!==t.id))){const e=(0,u.xc)();return t instanceof g.x_&&(r=r.map((r=>r.name===t.formFieldName?r.update("annotationIds",(r=>r.map((r=>r===t.id?e:r)))):r))),t.set("id",e)}return t})),r.size>0&&!this._isDestroyed()&&((0,i.kG)(this._formFieldCallbacks),this._formFieldCallbacks.createFormFields(r,y.y)),await this._loadFormFieldValues(),e.size>0&&!this._isDestroyed()&&((0,i.kG)(this._annotationCallbacks),this._annotationCallbacks.createAnnotations(e,(0,o.D5)(),y.y)),this._formFieldsLoadedPromise=Promise.resolve()}createFormFieldValue(t){return this._verifyLoaded(),this.setFormFieldValue(t)}setFormFieldValue(t){return this._verifyLoaded(),this._core.setFormFieldValue((0,f.kr)(t))}deleteFormFieldValue(t){return this._verifyLoaded(),this._core.deleteFormFieldValue(t.replace("form-field-value/",""))}loadAnnotationsForPageIndex(t){this._verifyLoaded();const e=this._state.alreadyLoadedPages.get(t);if(e)return e;const r=this._loadAnnotationsForPageIndex(t);return this._state=this._state.setIn(["alreadyLoadedPages",t],r),r}async _loadAnnotationsForPageIndex(t){const e=await this._core.annotationsForPageIndex(t),r=[],n=[],s=e.map((t=>{let{rollover:e,down:o,...i}=t;return e&&"number"==typeof i.pdfObjectId&&r.push(i.pdfObjectId),o&&"number"==typeof i.pdfObjectId&&n.push(i.pdfObjectId),i})).filter((t=>"number"==typeof t.pageIndex));this._formFieldCallbacks&&await this.loadFormFields();const a=(0,o.aV)().withMutations((t=>{s.filter((t=>!t.id||this._readStateCallbacks&&!this._readStateCallbacks.isAnnotationInState(t.id))).forEach((e=>{e.pdfObjectId;try{const r=e.id||(function(t){return"pspdfkit/link"===t.type&&0===t.pdfObjectId}(e)?(0,u.xc)():e.pdfObjectId.toString()),n=(0,f.vH)(r,e);t.push(n)}catch(t){(0,i.um)(`Skipped creating annotation #${e.pdfObjectId} from payload because an error occurred while deserializing.`),(0,i.um)(t)}}))}));a.size>0&&!this._isDestroyed()&&((0,i.kG)(this._annotationCallbacks),this._annotationCallbacks.createAnnotations(a,(0,o.D5)(),y.y)),r.length>0&&((0,i.kG)(this._annotationCallbacks),this._annotationCallbacks.addAnnotationVariants("rollover",r)),n.length>0&&((0,i.kG)(this._annotationCallbacks),this._annotationCallbacks.addAnnotationVariants("down",n)),this._state=this._state.setIn(["alreadyLoadedPages",t],Promise.resolve())}async _loadFormFieldValues(){this._verifyLoaded();const t=await this._core.getFormValues(),e=(0,o.aV)().withMutations((e=>{t.forEach((t=>{try{e.push((0,f.u9)(t))}catch(e){(0,i.um)(`Skipped creating form field value #${t.pdfObjectId} from payload because an error occurred while deserializing.`),(0,i.um)(e)}}))}));e.size>0&&!this._isDestroyed()&&((0,i.kG)(this._formFieldValueCallbacks),this._formFieldValueCallbacks.setFormFieldValues(e))}async loadBookmarks(){this._verifyLoaded();const t=await this._core.getBookmarks(),e=(0,o.aV)().withMutations((e=>{t.forEach((t=>{let r;r=t.id?t.id:t.pdfBookmarkId?t.pdfBookmarkId:(0,_.A)();try{e.push((0,p.i)(r,t))}catch(t){(0,i.um)(`Skipped creating bookmark #${r} from payload because an error occurred while deserializing.`),(0,i.um)(t)}}))}));e.size>0&&!this._isDestroyed()&&((0,i.kG)(this._bookmarkCallbacks),this._bookmarkCallbacks.createBookmarks(e,y.y))}_verifyLoaded(){(0,i.kG)(this._state.isLoaded,"StandaloneProvider not properly initialized.")}_isDestroyed(){return this._state.isDestroyed}async syncChanges(){}}function S(t){const e={};return Object.keys(t).forEach((r=>{Array.isArray(t[r])?e[r]=t[r].filter(Boolean):"object"==typeof t[r]&&null!==t[r]?e[r]=S(t[r]):e[r]=t[r]})),e}class k{constructor(t,e){this.identifier=t,this.callback=e}request(){return this.callback()}}var O=r(34997);var F=r(1367),x=r(97921),I=r(49029);class A extends(o.WV({baseUrl:null,baseCoreUrl:null,licenseKey:null,document:null,backendPermissions:new x.Z,documentResponse:null,disableWebAssembly:!1,disableWebAssemblyStreaming:!1,enableAutomaticLinkExtraction:!1,overrideMemoryLimit:null,features:(0,o.aV)(),signatureFeatureAvailability:I.H.NONE,documentHandle:null,trustedCAsCallback:null,signaturesInfoPromise:null,customFonts:null,forceLegacySignaturesFeature:!1,forceAnnotationsRender:!1,electronAppName:null,lazyLoadedPages:null,isSharePoint:!1,isSalesforce:!1})){}var D=r(96233),P=r(5164),E=r(52701),R=r(94290),B=r(55),C=r(11278),T=r(85596),L=r(63880),j=r(50809),q=r(68582),M=r(42457);let z;z=r(72098).Z;const N=new class{size=1;_freeObjects=[];constructor(t){this._constructor=t}checkOut(){let t;return t=this._freeObjects.length>0?this._freeObjects.shift():new this._constructor,{object:t,checkIn:()=>{this._freeObjects.length>=this.size?t.destroy():(t.recycle(),this._freeObjects.push(t))}}}}(z);class U extends c.W{type="STANDALONE";_XFDF=null;constructor(t){super(),$(t);const{baseUrl:e,baseCoreUrl:r,instantJSON:n,XFDF:o,enableAutomaticLinkExtraction:i,overrideMemoryLimit:s,trustedCAsCallback:a,electronAppName:u,isSharePoint:c,isSalesforce:l}=t;"string"==typeof o&&(this._XFDF={source:o,keepCurrentAnnotations:!0===t.XFDFKeepCurrentAnnotations}),n&&n.annotations&&(n.annotations=n.annotations.map((t=>(t.id=t.id.toString(),t)))),this._instantJSON=n,"function"==typeof a&&(this._trustedCAsCallback=a);const{disableWebAssembly:d,disableWebAssemblyStreaming:f,customFonts:p}=t,{standaloneInstancesPoolSize:m}=t;void 0!==m&&(N.size=m);const _=!!t.electronicSignatures&&Boolean(t.electronicSignatures.forceLegacySignaturesFeature);this._state=new A(J({baseUrl:e,baseCoreUrl:r,licenseKey:t.licenseKey,document:t.document,disableWebAssembly:d,disableWebAssemblyStreaming:f,enableAutomaticLinkExtraction:i,overrideMemoryLimit:s,documentHandle:"0",customFonts:p,forceLegacySignaturesFeature:_,electronAppName:u,isSharePoint:c,isSalesforce:l})),this._requestQueue=new F.Z(h.gZ);const{object:y,checkIn:g}=N.checkOut();this.client=y,this.checkIn=g;const v=n?{annotations:n.annotations||[],formFields:n.formFields||[],formFieldValues:n.formFieldValues||[],skippedPdfObjectIds:n.skippedPdfObjectIds||[],skippedPdfFormFieldIds:n.skippedPdfFormFieldIds||[],attachments:n.attachments||{},bookmarks:n.bookmarks||[],skippedPdfBookmarkIds:n.skippedPdfBookmarkIds||[],format:n.format,...n.pdfId?{pdfId:n.pdfId}:null}:null;this.provider=new w(this.client,v)}isUsingInstantProvider(){return!1}hasClientsPresence(){return!1}async load(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isPDFJavaScriptEnabled=t.isPDFJavaScriptEnabled,{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:!!t.password,allowedTileScales:"all"}}destroy(){this.provider&&this.provider.destroy(),this._requestQueue&&this._requestQueue.destroy(),this.checkIn()}async documentInfo(){return this._state.documentResponse}async lazyLoadPages(){if(!this._state.lazyLoadedPages){const t=await this.client.getAllPageInfos(this._state.documentResponse.pageCount);this._state=this._state.set("lazyLoadedPages",t)}return this._state.lazyLoadedPages}getDocumentHandle(){return this._state.documentHandle}getFormJSON(){return this.client.getFormJSON()}permissions(){return Promise.resolve(this._state.backendPermissions)}textForPageIndex(t){let e=!1;const r=new k(`${t}-text`,(()=>e?Promise.reject({aborted:!0}):this.client.textForPageIndex(t).then((r=>e?Promise.reject({aborted:!0}):(0,l.T)({textLines:r},t))))),{promise:n,cancel:o}=this._requestQueue.enqueue(r);return{promise:n,cancel:()=>{e=!0,o()}}}getTextFromRects(t,e){return this.client.getTextFromRects(t,e.toJS())}renderTile(t,e,r,n,o,a){const c=`${t}-${e.width}-${e.height}-${r.top}-${r.left}-${r.width}-${r.height}-${this.getDocumentHandle()}`,l=new k(c,(()=>{const c=a?a.annotations.filter(u.d).map(f.Hs).toJS():null,l=a?a.formFieldValues.map(f.kr).toJS():null;return this.client.renderTile(t,e.toObject(),r.toObject(),n,o,c||(this._state.forceAnnotationsRender?[]:null),l,(0,j.aV)({width:r.width,height:r.height})).then((n=>n?"string"==typeof n?(0,s.ar)(n):(0,s.R9)({buffer:n,width:r.width,height:r.height}):((0,i.ZK)("The image buffer or URL is null, the tile cannot be rendered:",`page: ${t}, page size: ${e.toObject()}, tile rect: ${r.toObject()}`),Promise.resolve(null))))})),h=e.width===r.width&&e.height===r.height,{promise:d,cancel:p}=this._requestQueue.enqueue(l,h);return{promise:d,cancel:p}}renderAnnotation(t,e,r,n,o,a){const u=t.id;(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");const c=new k(u,(()=>this.client.renderAnnotation((0,f.Hs)(t),r,n,o,(0,j.aV)({width:n,height:o}),a).then((e=>e?(0,s.R9)({buffer:e,width:n,height:o}):((0,i.ZK)("The image buffer is null, the annotation cannot be rendered",t.toJS()),Promise.resolve(null))))));return this._requestQueue.enqueue(c,!1)}async getMeasurementSnappingPoints(t){return this.client.getMeasurementSnappingPoints(t)}async renderPageAnnotations(t,e,r){const n=this.provider;(0,i.kG)(n instanceof w,"Standalone can only use standalone annotation provider");const o=[],a=[],c=e.some((t=>t instanceof g.x_));c&&await n._setReadStateCallbacksPromise;const l=e.filter((t=>{const e=c?n._readStateCallbacks.getAnnotationWithFormField(t.id):null,r=null==e?void 0:e.formField,i=(0,u._R)(t,r);if(i&&r){o.find((t=>t.name===r.name))||(o.push((0,f.kr)((0,P.CH)(r))),a.push(r))}return i}));function h(t,e){if(null!=t&&t.formFieldName){const r=a.find((e=>e.name===t.formFieldName)),n=e.find((e=>e.name===t.formFieldName));if(!(0,P.BT)(r,n))return!1}return!0}const d=new Promise(((e,o)=>{this.client.renderPageAnnotations(t,l.map((t=>t.pdfObjectId)).toArray(),l.map((t=>t.boundingBox.width*r)).toArray(),l.map((t=>t.boundingBox.height*r)).toArray(),(0,j.zP)()).then((t=>{const o=a.map((t=>{var e;return null===(e=n._readStateCallbacks)||void 0===e?void 0:e.getFormFieldByName(t.name)})).filter(Boolean),u=t.map(((t,e)=>{const n=l.get(e);return h(n,o)&&n?t?(0,s.R9)({buffer:t,width:n.boundingBox.width*r,height:n.boundingBox.height*r}):((0,i.ZK)("The image buffer is null, the annotation cannot be rendered",n.toJS()),Promise.resolve(null)):Promise.resolve(null)}));Promise.all(u).then((t=>{const r=a.map((t=>{var e;return null===(e=n._readStateCallbacks)||void 0===e?void 0:e.getFormFieldByName(t.name)})).filter(Boolean);t.forEach(((t,e)=>{const n=l.get(e);if(n){const e=this.annotationAPStreamPromises.get(n.id),o=h(n,r);e&&(this.annotationAPStreamPromises=this.annotationAPStreamPromises.delete(n.id),e(o?t:null)),t&&o&&this.cacheAPStream(t,n)}})),e()}))})).catch(o)}));return this.pageAPStreamsPromises=this.pageAPStreamsPromises.set(t,d),d}renderDetachedAnnotation(t,e,r,n){if(t.id)throw new i.p2(`Detached annotations should not have an \`id\`: ${t.id}`);const o=(0,O.SK)(),a=new k(o,(()=>this.client.renderDetachedAnnotation((0,f.Hs)(t),e,r,n,(0,j.aV)({width:r,height:n})).then((e=>e?(0,s.R9)({buffer:e,width:r,height:n}):((0,i.ZK)("The image buffer is null, the annotation cannot be rendered",t.toJS()),Promise.resolve(null)))))),{promise:u,cancel:c}=this._requestQueue.enqueue(a,!1);return{promise:u,cancel:c}}async getAttachment(t){const[e,r]=await this.client.getAttachment(t);return new Blob([e],{type:r})}async parseXFDF(t){(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");const{errors:e,formFieldValues:r,annotations:n}=await this.client.parseXFDF(t);return{errors:null==e?void 0:e.map((t=>({errorMessage:t.error_message,type:t.type}))),formFieldValues:null==r?void 0:r.reduce(((t,e)=>(t[e.fqdn]=e.values,t)),{}),annotations:(0,o.aV)((null==n?void 0:n.map((t=>(0,f.vH)((0,u.xc)(),t))))||[])}}async search(t,e,r,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:L.S.TEXT;(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");const a=await this.client.search(t,e,r,n,s);return(0,d.E)(a.filter((t=>o||!t.isAnnotation)))}async searchAndRedact(t,e,r){(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");const{totalPages:n}=r,s=await this.client.search(t,0,n,e.caseSensitive,e.searchType);return(0,o.aV)(s.filter((t=>e.searchInAnnotations||!t.isAnnotation)).map((t=>{const n=t.isAnnotation?[t.annotationRect]:t.rectsOnPage,s=(0,o.aV)(n).map((t=>((0,i.kG)(t),(0,T.k)(t))));return new B.Z({...(0,u.lx)(r),...e.annotationPreset,pageIndex:t.pageIndex,rects:s,boundingBox:E.Z.union(s)})})))}exportPDF(){let{flatten:t=!1,incremental:e=!1,saveForPrinting:r=!1,format:n="pdf",excludeAnnotations:o=!1,preserveInstantJSONChanges:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),this.client.exportFile(t,e,r,n,o,s).then((t=>{let[e,r]=t;return e.mimeType=r.mimeType,e.extension=r.extension,e}))}exportXFDF(){return(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),this.client.exportXFDF()}exportInstantJSON(){return(0,i.kG)(this.provider instanceof w,"Standalone build requires Standalone annotation provider."),this.client.exportInstantJSON()}getPDFURL(){let{includeComments:t=!0,saveForPrinting:e,excludeAnnotations:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.generatePDFObjectURL({includeComments:t,saveForPrinting:e,excludeAnnotations:r})}generatePDFObjectURL(){let t,{includeComments:e=!0,saveForPrinting:r,excludeAnnotations:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=!1;return{promise:new Promise((i=>{this.exportPDF({flatten:!0,includeComments:e,saveForPrinting:r,excludeAnnotations:n}).then((e=>{if(o)return;const r=new Blob([e],{type:e.mimeType});t=window.URL.createObjectURL(r),i(t)}))})),revoke:()=>{t&&window.URL.revokeObjectURL(t),o=!0}}}async getDocumentOutline(){const t=await this.client.getDocumentOutline();return(0,o.aV)(t.map(a.i))}async onKeystrokeEvent(t){return await this.client.onKeystrokeEvent(t)}async evalFormValuesActions(t){return(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),this.client.evalFormValuesActions(t.map(f.kr).toJS())}async evalScript(t,e){return(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),this.client.evalScript(t,e)}async setFormJSONUpdateBatchMode(t){return this.client.setFormJSONUpdateBatchMode(t)}async applyOperationsAndReload(t){(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");try{let e,r;({processedOperations:e,operationsDocuments:r}=await V(t)),await this.client.applyOperations(e,r)}catch(t){throw new i.p2(`Applying operations failed: ${t}`)}return this.provider._state=this.provider._state.set("alreadyLoadedPages",(0,o.D5)()),this.reloadDocument()}async applyRedactionsAndReload(){(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");try{await this.client.applyRedactions()}catch(t){throw new i.p2(`Applying redactions failed: ${t}`)}return this.reloadDocument()}async reloadDocument(){try{var t;null===(t=this.provider)||void 0===t||t.destroy(),this.provider=new w(this.client,null),this._state=this._state.set("lazyLoadedPages",null);const e=await this.client.reloadDocument();return this._state=this._state.set("documentResponse",e).set("documentHandle",(parseInt(this._state.documentHandle)+1).toString()).set("signaturesInfoPromise",null),{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:!1,allowedTileScales:"all"}}catch(t){throw new i.p2(`Reloading failed: ${t}`)}}async getEmbeddedFiles(){const t=await this.client.getEmbeddedFilesList();return(0,o.aV)(t.map((t=>{let{id:e,...r}=t;return(0,M.i)(e,r,!0)})))}async exportPDFWithOperations(t){try{let e,r;return(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),({processedOperations:e,operationsDocuments:r}=await V(t)),this.client.exportPDFWithOperations(e,r)}catch(t){throw new i.p2(`Exporting PDF with operations failed: ${t}`)}}getSignaturesInfo(){try{if((0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),this._state.signaturesInfoPromise)return this._state.signaturesInfoPromise;const t=this.client.getSignaturesInfo().then((t=>(0,f.rS)(t)));return this._state=this._state.set("signaturesInfoPromise",t),t}catch(t){throw new i.p2(`Getting document signatures info: ${t}`)}}async refreshSignaturesInfo(){this._state=this._state.set("signaturesInfoPromise",null)}async loadCertificates(t){return this.client.loadCertificates(t)}async signDocumentAndReload(t,e){(0,i.kG)("function"==typeof e,"Signing document failed: twoStepSignatureCallback must be a function");const r=t&&t.placeholderSize?{estimatedSize:t.placeholderSize}:null;(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider");try{const{hash:n,signatureFormFieldName:o,file:s,fileContents:a}=await this.client.prepareSignInvisible(r,!!t&&Boolean(t.flatten));(0,i.kG)("function"==typeof e,"twoStepSignatureCallback must be a function");const u=await e({hash:n,fileContents:a});let c;if(!(u instanceof ArrayBuffer))throw new i.p2("Resolved value from twoStepSignatureCallback is of type "+typeof u+" and it must be an ArrayBuffer instead.");c=u,await this.client.sign(s,o,(0,D.sM)(c)),await this.reloadDocument()}catch(t){throw await this.client.restoreToOriginalState(),t}}cancelRequests(){this._requestQueue.cancelAll()}async syncChanges(){}getDefaultGroup(){}isCollaborationPermissionsEnabled(){return!1}async clearAPStreamCache(){return this.client.clearAPStreamCache()}async setComparisonDocument(t,e){return this.client.setComparisonDocument(t,e)}async openComparisonDocument(t){return this._state=this._state.set("forceAnnotationsRender",!1),await this.client.closeDocument(),this._state=this._state.set("forceAnnotationsRender",!0),await this.client.openComparisonDocument(t)||this._state.documentResponse}async documentCompareAndOpen(t){return this.client.documentCompareAndOpen(t)}async persistOpenDocument(t){return this.client.persistOpenDocument(t)}async cleanupDocumentComparison(){return this.client.cleanupDocumentComparison()}async runPDFFormattingScripts(t,e){let r=[];if(this._isPDFJavaScriptEnabled){const n=await this.client.enablePDFJavaScriptSupport(),{withAPStream:o,withoutAPStream:i}=t.reduce(((t,r)=>(null!=e&&e(r)?t.withAPStream.push(r.formFieldName):t.withoutAPStream.push(r.formFieldName),t)),{withAPStream:[],withoutAPStream:[]});let s=[];if(o.length&&!i.length)s=await this.client.runPDFFormattingScripts(o,!0);else if(!o.length&&i.length)s=await this.client.runPDFFormattingScripts(i,!1);else if(o.length&&i.length){const[t,e]=await Promise.all([this.client.runPDFFormattingScripts(o,!0),this.client.runPDFFormattingScripts(i,!1)]);s=t.concat(e)}r=(0,P.gE)(n,s)}return r}contentEditorEnter(){return this.client.contentEditorEnter()}contentEditorExit(){return this.client.contentEditorExit()}contentEditorGetTextBlocks(t){return this.client.contentEditorGetTextBlocks(t)}contentEditorRenderTextBlock(t,e,r){return this.client.contentEditorRenderTextBlock(t,e,r)}contentEditorSetTextBlockCursor(t,e,r,n){return this.client.contentEditorSetTextBlockCursor(t,e,r,n)}contentEditorMoveTextBlockCursor(t,e,r,n){return this.client.contentEditorMoveTextBlockCursor(t,e,r,n)}contentEditorInsertTextBlockString(t,e,r){return this.client.contentEditorInsertTextBlockString(t,e,r)}contentEditorDeleteTextBlockString(t,e,r){return this.client.contentEditorDeleteTextBlockString(t,e,r)}contentEditorSetTextBlockSelection(t,e,r){return this.client.contentEditorSetTextBlockSelection(t,e,r)}contentEditorSetTextBlockSelectionRange(t,e,r,n,o){return this.client.contentEditorSetTextBlockSelectionRange(t,e,r,n,o)}contentEditorTextBlockUndo(t,e){return this.client.contentEditorTextBlockUndo(t,e)}contentEditorTextBlockRedo(t,e){return this.client.contentEditorTextBlockRedo(t,e)}contentEditorTextBlockApplyFormat(t,e,r){return this.client.contentEditorTextBlockApplyFormat(t,e,r)}async contentEditorGetAvailableFaces(){return this.client.contentEditorGetAvailableFaces()}async contentEditorResolveFace(t,e){return this.client.contentEditorResolveFace(t,e)}async contentEditorSaveAndReload(t){return(0,i.kG)(this.provider instanceof w,"Standalone can only use standalone annotation provider"),await this.client.contentEditorSave(t),this.provider._state=this.provider._state.set("alreadyLoadedPages",(0,o.D5)()),this.reloadDocument()}}function J(t){return{baseUrl:t.baseUrl,baseCoreUrl:t.baseCoreUrl,licenseKey:t.licenseKey,document:t.document,disableWebAssembly:!!t.disableWebAssembly,disableWebAssemblyStreaming:!!t.disableWebAssemblyStreaming,enableAutomaticLinkExtraction:!!t.enableAutomaticLinkExtraction,overrideMemoryLimit:"number"==typeof t.overrideMemoryLimit?t.overrideMemoryLimit:null,documentHandle:"number"==typeof t.documentHandle?t.documentHandle:"0",trustedCAsCallback:"function"==typeof t.trustedCAsCallback?t.trustedCAsCallback:null,customFonts:Array.isArray(t.customFonts)?t.customFonts.filter((t=>t instanceof q.Z)):null,forceLegacySignaturesFeature:Boolean(t.forceLegacySignaturesFeature),electronAppName:"string"==typeof t.electronAppName?t.electronAppName:null,isSharePoint:Boolean(t.isSharePoint),isSalesforce:Boolean(t.isSalesforce)}}function $(t){const{licenseKey:e,instantJSON:r,XFDF:n,disableWebAssembly:o,disableWebAssemblyStreaming:s,disableIndexedDBCaching:a,enableAutomaticLinkExtraction:u,overrideMemoryLimit:c,standaloneInstancesPoolSize:l,trustedCAsCallback:h,baseUrl:d,baseCoreUrl:f,customFonts:p,isSharePoint:m,isSalesforce:_}=t;if((0,i.kG)("string"==typeof d,"`baseUrl` is mandatory and must be a valid URL, e.g. `https://example.com/"),(0,C.Pn)(d),(0,i.kG)(!f||"string"==typeof f,"`baseCoreUrl` must be a valid URL if set, e.g. `https://example.com/"),f&&(0,C.rH)(f),(0,i.kG)(null==e||"string"==typeof e,"licenseKey must be a string value if provided. Please obtain yours from https://customers.pspdfkit.com."),"string"==typeof e&&(0,i.kG)(!e.startsWith("TRIAL-"),"You're using the npm key instead of the license key. This key is used to download the PSPDFKit for Web package via the node package manager.\n\nLeave out the license key to activate as a trial."),(0,i.kG)(void 0===n||"string"==typeof n,"XFDF must be a string"),r){(0,i.kG)("object"==typeof r&&null!==r,"instantJSON must be an Object"),(0,i.kG)(void 0===n,"Cannot import from both instantJSON and XFDF"),(0,i.kG)("https://pspdfkit.com/instant-json/v1"===r.format,"instantJSON has an invalid format, please use 'https://pspdfkit.com/instant-json/v1");const{pdfId:t}=r;t&&(0,i.kG)("object"==typeof t&&null!==t&&("string"==typeof t.permanent&&"string"==typeof t.changing||"string"!=typeof t.permanent&&"string"!=typeof t.changing),"instantJSON has an invalid pdfId"),(0,i.kG)(void 0===r.skippedPdfObjectIds||Array.isArray(r.skippedPdfObjectIds),"instantJSON has invalid skippedPdfObjectIds"),(0,i.kG)(void 0===r.annotations||Array.isArray(r.annotations)&&r.annotations.every((t=>"object"==typeof t&&null!==t)),"instantJSON has invalid annotations"),(0,i.kG)(void 0===r.formFieldValues||Array.isArray(r.formFieldValues)&&r.formFieldValues.every((t=>"object"==typeof t&&null!==t)),"instantJSON has invalid form field values"),(0,i.kG)(void 0===r.skippedPdfBookmarkIds||Array.isArray(r.skippedPdfBookmarkIds),"instantJSON has invalid skippedPdfBookmarkIds"),(0,i.kG)(void 0===r.bookmarks||Array.isArray(r.bookmarks)&&r.bookmarks.every((t=>"object"==typeof t&&null!==t)),"instantJSON has invalid bookmarks")}(0,i.kG)(void 0===o||"boolean"==typeof o,"disableWebAssembly must be a boolean"),(0,i.kG)(void 0===s||"boolean"==typeof s,"disableWebAssemblyStreaming must be a boolean"),(0,i.kG)(void 0===u||"boolean"==typeof u,"enableAutomaticLinkExtraction must be a boolean"),(0,i.kG)(void 0===c||"number"==typeof c,"overrideMemoryLimit must be a number"),(0,i.kG)(void 0===l||"number"==typeof l&&l>=0,"standaloneInstancesPoolSize must be a non-negative number"),(0,i.kG)(void 0===h||"function"==typeof h,"trustedCAsCallback must be a function"),(0,i.kG)(void 0===p||Array.isArray(p)&&p.every((t=>t instanceof q.Z)),"customFonts must be an array of PSPDFKit.Font instances"),(0,i.kG)(void 0===p||p.every((t=>t.callback)),"All PSPDFKit.Font instances specified on customFonts must have its callback property defined"),void 0!==a&&(0,i.a1)("disableIndexedDbCaching has been deprecated and it no longer has effect. It will be removed in a later version.\nBrowsers dropped IndexedDB serialization of Wasm modules in favor of regular HTTP caching."),(0,i.kG)(!(m&&_),"You cannot enable both SharePoint and Salesforce integrations at the same time. Please set either isSharePoint or isSalesforce to true, but not both.")}async function V(t){const e=new WeakMap,r={};return{processedOperations:await Promise.all(t.map((async(t,n)=>{if("importDocument"===t.type){const{document:o}=t;return(0,i.kG)(o instanceof File||o instanceof Blob,"Wrong `importDocument` operation `document` value: it must be a File or a Blob"),(0,R.M)(e,r,o,t,n,"document")}if("applyInstantJson"===t.type){const o=t.instantJson;(0,i.kG)("object"==typeof o&&null!==o,"Wrong `applyInstantJson` operation `instantJson` value: it must be an object");const s=JSON.stringify(o),a=new Blob([s],{type:"application/json"});return(0,R.M)(e,r,a,t,n,"dataFilePath")}if("applyXfdf"===t.type){const o=t.xfdf;(0,i.kG)("string"==typeof o,"Wrong `applyXfdf` operation `xfdf` value: it must be a string");const s=new Blob([o],{type:"application/vnd.adobe.xfdf"});return(0,R.M)(e,r,s,t,n,"dataFilePath")}return t}))),operationsDocuments:r}}var G=r(95453),K=r(36091);let W;class H extends U{constructor(t){const e=t.baseUrl||(0,n.SV)(window.document),r=t.baseCoreUrl||e,o={...t,baseUrl:e,baseCoreUrl:r};if("string"!=typeof o.baseUrl)throw new i.p2("`baseUrl` is mandatory and must be a valid URL, e.g. `https://example.com/`");if("string"!=typeof o.document&&!(o.document instanceof ArrayBuffer))throw new i.p2("document must be either an URL to a supported document type (PDF and images), e.g. `https://example.com/document.pdf`, or an `ArrayBuffer`");if(W&&W!==o.licenseKey)throw new i.p2("Trying to re-use PSPDFKit for Web with a different licenseKey than the previous one.\nUnfortunately we only allow one licenseKey per instance.\nPlease contact support for further assistance.");if("string"==typeof o.licenseKey&&o.licenseKey.startsWith("TRIAL-"))throw new i.p2("You're using the npm key instead of the license key. This key is used to download the PSPDFKit for Web package via the node package manager.\n\nLeave out the license key to activate as a trial.");super(o),this.destroyed=!1}async load(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=.2;if(e.progressCallback&&e.progressCallback("loading",r),this._isPDFJavaScriptEnabled=e.isPDFJavaScriptEnabled,"string"==typeof this._state.document){if(this._state.isSharePoint){const t=new URL(this._state.document,this._state.baseUrl),[e,r]=t.hostname.split(".").reverse();if("sharepoint"!==r||"com"!==e)throw new i.p2(`When using SharePoint, the document URL must be a sharepoint.com URL: it's ${r}.${e} instead.`)}if(this._state.isSalesforce){const t=new URL(this._state.baseUrl),[e,r]=t.hostname.split(".").reverse();if("salesforce"!==r&&"force"!==r&&"visualforce"!==r||"com"!==e)throw new i.p2(`When using Salesforce, the SDK must be loaded from a Salesforce URL: it's ${r}.${e} instead.`)}t=fetch(this._state.document,{credentials:"same-origin"}).then((t=>t.arrayBuffer())).finally((()=>{r+=.3,e.progressCallback&&e.progressCallback("loading",r)}))}else t=this._state.document;const n=await X(this.client,this._state).finally((()=>{r+=.3,e.progressCallback&&e.progressCallback("loading",r)}));(0,i.kG)(n);const{features:s,signatureFeatureAvailability:a}=n;if(this._state.isSharePoint&&"string"==typeof this._state.document&&Array.isArray(n.afu)){const t=new URL(this._state.document,this._state.baseUrl);if(!n.afu.some((e=>t.hostname.match(e))))throw new i.p2(`The document origin ${t.hostname} is not authorized.`)}const u=a===I.H.ELECTRONIC_SIGNATURES&&(0,K.Vz)(s)&&this._state.forceLegacySignaturesFeature?I.H.LEGACY_SIGNATURES:a;this._state=this._state.set("features",(0,o.aV)(s)).set("signatureFeatureAvailability",u),W=this._state.licenseKey;const c=await t;let l;try{l=this.destroyed?await new Promise((()=>{})):await this.client.openDocument(c,e.password,"number"==typeof e.initialPageIndex?e.initialPageIndex:0)}catch(t){throw"INVALID_PASSWORD"===t.message&&this._state.document instanceof ArrayBuffer&&(this._state=this._state.set("document",t.callArgs[0])),"IMAGE_DOCUMENTS_NOT_LICENSED"===t.message&&(t.message="The image documents feature is not enabled for your license key. Please contact support or sales to purchase the UI module for PSPDFKit for Web."),t}if(this._XFDF&&await this.client.importXFDF(this._XFDF.source,this._XFDF.keepCurrentAnnotations),this._instantJSON&&this._instantJSON.pdfId&&l.ID.permanent){const t=this._instantJSON.pdfId,e=l.ID;if(t.permanent!==e.permanent)throw new i.p2("Could not instantiate from Instant JSON: Permanent PDF ID mismatch.\nPlease use the same PDF document that was used to create this Instant JSON.\nFor more information, please visit: https://pspdfkit.com/guides/web/current/importing-exporting/instant-json/");if(t.changing!==e.changing)throw new i.p2("Could not instantiate from Instant JSON: Changing PDF ID mismatch.\nPlease use the same revision of this PDF document that was used to create this Instant JSON.\nFor more information, please visit: https://pspdfkit.com/guides/web/current/importing-exporting/instant-json/")}if(this._trustedCAsCallback)try{const t=await this._trustedCAsCallback();if(!Array.isArray(t))throw new i.p2("Certificates response must be an array");if(t.some((t=>!(t instanceof ArrayBuffer)&&"string"!=typeof t)))throw new i.p2("All certificates must be passed as ArrayBuffer (DER) or string (PEM)");await this.client.loadCertificates(t.map(D.uF))}catch(t){throw new i.p2(`Could not retrieve certificates for digital signatures validation: ${t.message}.`)}return this._state=this._state.set("documentResponse",l),{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:!!e.password,allowedTileScales:"all"}}destroy(){this.destroyed=!0,super.destroy()}}const Q={current:void 0};function X(t,e){var r;Q.current=Q.current||(e.customFonts?(r=e.customFonts,Promise.all(r.map((t=>new Promise((e=>{var r;(0,i.kG)(t.name),null==t||null===(r=t.callback)||void 0===r||r.call(t,t.name).then((r=>{(0,i.kG)(t.name),r instanceof Blob?e({name:t.name,data:r}):((0,i.vU)(`Callback for retrieving font ${t.name} didn't returned a Blob. It returned ${typeof r}`),e())})).catch((r=>{(0,i.vU)(`Error returned by callback for retrieving font ${t.name}. ${r}`),e()}))}))))).then((t=>t.filter(Boolean)))):void 0);const n=e.electronAppName||(0,G.$u)()||window.location.origin;return t.loadNativeModule(e.baseCoreUrl,{mainThreadOrigin:n,disableWebAssembly:e.disableWebAssembly,disableWebAssemblyStreaming:e.disableWebAssemblyStreaming,enableAutomaticLinkExtraction:e.enableAutomaticLinkExtraction,overrideMemoryLimit:e.overrideMemoryLimit}).then((async()=>Q.current?t.load(e.baseCoreUrl,e.licenseKey,{mainThreadOrigin:n,customFonts:await Q.current,isSharePoint:e.isSharePoint,isSalesforce:e.isSalesforce}):t.load(e.baseCoreUrl,e.licenseKey,{mainThreadOrigin:n,isSharePoint:e.isSharePoint,isSalesforce:e.isSalesforce})))}},1367:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(35369),o=r(46232);function i(){return!0}class s{constructor(t){this.queue=(0,n.zN)(),this.priorityQueue=(0,n.zN)(),this.inFlightRequests=(0,n.D5)(),this.inflightRequestLimit=t,this.isDestroyed=!1}enqueue(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isDestroyed)return{promise:new Promise((()=>{})),cancel:()=>{}};let r=null,o=null;const i=new Promise(((t,e)=>{r=t,o=e})),s=e?this.priorityQueue:this.queue,a=(0,n.t8)(s,t,{promise:i,resolve:r,reject:o});return e?this.priorityQueue=a:this.queue=a,e?this.next():setTimeout((()=>this.next()),35),{promise:i,cancel:()=>this._cancel(t)}}_cancel(t){this.queue.has(t)&&(this.queue=this.queue.delete(t)),this.priorityQueue.has(t)&&(this.priorityQueue=this.priorityQueue.delete(t)),this.inFlightRequests.has(t)&&(this.inFlightRequests=this.inFlightRequests.delete(t))}cancelAll(){this.queue=(0,n.zN)(),this.priorityQueue=(0,n.zN)(),this.inFlightRequests=(0,n.D5)()}_requestFinished(t,e){if(this.isDestroyed)return;const r=this.inFlightRequests.get(t);r&&(r.resolve(e),this.inFlightRequests=this.inFlightRequests.delete(t)),this.next()}_requestFailed(t,e){if(this.isDestroyed)return;const r=this.inFlightRequests.get(t);r&&(r.reject(e),this.inFlightRequests=this.inFlightRequests.delete(t)),this.next()}next(){if(!(this.isDestroyed||this.inFlightRequests.size>=this.inflightRequestLimit)){if(this.priorityQueue.size>=1){const t=this.priorityQueue.findLastEntry(i);(0,o.k)(t);const[e,r]=t;return this.priorityQueue=this.priorityQueue.delete(e),this.inFlightRequests=this.inFlightRequests.set(e,r),void e.request().then((t=>this._requestFinished(e,t))).catch((t=>this._requestFailed(e,t)))}if(this.queue.size>=1){const t=this.queue.findEntry(i);(0,o.k)(t);const[e,r]=t;this.queue=this.queue.delete(e),this.inFlightRequests=this.inFlightRequests.set(e,r),e.request().then((t=>this._requestFinished(e,t))).catch((t=>this._requestFailed(e,t)))}}}destroy(){this.isDestroyed=!0}}},42457:(t,e,r)=>{"use strict";r.d(e,{i:()=>a});var n=r(35369);class o extends(n.WV({id:"",attachmentId:"",description:null,fileName:null,fileSize:null,updatedAt:null})){}var i=r(55090);function s(t,e){return e}function a(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(0,r)?new o({id:(0,i.C)(),description:e.fileDescription,attachmentId:t,fileName:e.fileName||null,fileSize:e.fileSize||null,updatedAt:e.modificationDate?new Date(e.modificationDate):null}):new o({id:t,description:e.description,attachmentId:e.fileAttachmentId,fileName:e.fileName||null,fileSize:e.fileSize||null,updatedAt:new Date(e.updatedAt)||null})}},94290:(t,e,r)=>{"use strict";function n(t,e,r,n,o,i){let s;return t.has(r)?s=t.get(r):(s=o.toString(),e[s]=r,t.set(r,s)),{...n,[i]:s}}r.d(e,{M:()=>n})},89777:(t,e,r)=>{"use strict";r.d(e,{E:()=>a});var n=r(85596),o=r(35369),i=r(70545),s=r(51908);function a(t){return(0,i.kG)(Array.isArray(t),"Wrong `json` field"),(0,o.aV)(t.map((t=>((0,i.kG)("number"==typeof t.pageIndex,"Wrong `pageIndex` field"),(0,i.kG)("string"==typeof t.previewText,"Wrong `previewText` field"),(0,i.kG)(Array.isArray(t.rangeInPreview),"Wrong `rangeInPreview` field"),(0,i.kG)(Array.isArray(t.rectsOnPage),"Wrong `rectsOnPage` field"),new s.Z({pageIndex:t.pageIndex,previewText:t.previewText,locationInPreview:t.rangeInPreview[0],lengthInPreview:t.rangeInPreview[1],rectsOnPage:(0,o.aV)(t.rectsOnPage).map((t=>(0,n.k)(t))),isAnnotation:!!t.isAnnotation,annotationRect:t.annotationRect?(0,n.k)(t.annotationRect):null})))).filter(Boolean))}},42876:(t,e,r)=>{t.exports=function(){return r(69855)('/*!\n * PSPDFKit for Web 2022.5.5 (https://pspdfkit.com/web)\n *\n * Copyright (c) 2016-2022 PSPDFKit GmbH. All rights reserved.\n *\n * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW\n * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.\n * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.\n * This notice may not be removed from this file.\n *\n * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/\n */(()=>{var t={7932:()=>{Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(r,n){return Array.isArray(n)?r.push.apply(r,t.call(n,e-1)):r.push(n),r}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})},3099:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},9670:(t,e,r)=>{var n=r(111);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},1318:(t,e,r)=>{var n=r(5656),o=r(7466),i=r(1400),s=function(t){return function(e,r,s){var a,u=n(e),c=o(u.length),f=i(s,c);if(t&&r!=r){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===r)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},244:(t,e,r)=>{var n=r(3099);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},4326:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},9920:(t,e,r)=>{var n=r(6656),o=r(3887),i=r(1236),s=r(3070);t.exports=function(t,e){for(var r=o(e),a=s.f,u=i.f,c=0;c<r.length;c++){var f=r[c];n(t,f)||a(t,f,u(e,f))}}},8880:(t,e,r)=>{var n=r(9781),o=r(3070),i=r(9114);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9781:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},317:(t,e,r)=>{var n=r(7854),o=r(111),i=n.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,r)=>{var n=r(7854),o=r(1236).f,i=r(8880),s=r(1320),a=r(3505),u=r(9920),c=r(4705);t.exports=function(t,e){var r,f,h,l,p,d=t.target,y=t.global,_=t.stat;if(r=y?n:_?n[d]||a(d,{}):(n[d]||{}).prototype)for(f in e){if(l=e[f],h=t.noTargetGet?(p=o(r,f))&&p.value:r[f],!c(y?f:d+(_?".":"#")+f,t.forced)&&void 0!==h){if(typeof l==typeof h)continue;u(l,h)}(t.sham||h&&h.sham)&&i(l,"sham",!0),s(r,f,l,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},5005:(t,e,r)=>{var n=r(857),o=r(7854),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t])||i(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},7854:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||Function("return this")()},6656:t=>{var e={}.hasOwnProperty;t.exports=function(t,r){return e.call(t,r)}},3501:t=>{t.exports={}},490:(t,e,r)=>{var n=r(5005);t.exports=n("document","documentElement")},4664:(t,e,r)=>{var n=r(9781),o=r(7293),i=r(317);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,r)=>{var n=r(7293),o=r(4326),i="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},2788:(t,e,r)=>{var n=r(5465),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return o.call(t)}),t.exports=n.inspectSource},9909:(t,e,r)=>{var n,o,i,s=r(8536),a=r(7854),u=r(111),c=r(8880),f=r(6656),h=r(6200),l=r(3501),p=a.WeakMap;if(s){var d=new p,y=d.get,_=d.has,v=d.set;n=function(t,e){return v.call(d,t,e),e},o=function(t){return y.call(d,t)||{}},i=function(t){return _.call(d,t)}}else{var m=h("state");l[m]=!0,n=function(t,e){return c(t,m,e),e},o=function(t){return f(t,m)?t[m]:{}},i=function(t){return f(t,m)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},4705:(t,e,r)=>{var n=r(7293),o=/#|\\.prototype\\./,i=function(t,e){var r=a[s(t)];return r==c||r!=u&&("function"==typeof e?n(e):!!e)},s=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";t.exports=i},9747:(t,e,r)=>{var n=r(227);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},111:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:t=>{t.exports=!1},8536:(t,e,r)=>{var n=r(7854),o=r(2788),i=n.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},3070:(t,e,r)=>{var n=r(9781),o=r(4664),i=r(9670),s=r(7593),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(i(t),e=s(e,!0),i(r),o)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:(t,e,r)=>{var n=r(9781),o=r(5296),i=r(9114),s=r(5656),a=r(7593),u=r(6656),c=r(4664),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=a(e,!0),c)try{return f(t,e)}catch(t){}if(u(t,e))return i(!o.f.call(t,e),t[e])}},8006:(t,e,r)=>{var n=r(6324),o=r(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},6324:(t,e,r)=>{var n=r(6656),o=r(5656),i=r(1318).indexOf,s=r(3501);t.exports=function(t,e){var r,a=o(t),u=0,c=[];for(r in a)!n(s,r)&&n(a,r)&&c.push(r);for(;e.length>u;)n(a,r=e[u++])&&(~i(c,r)||c.push(r));return c}},5296:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},3887:(t,e,r)=>{var n=r(5005),o=r(8006),i=r(5181),s=r(9670);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(s(t)),r=i.f;return r?e.concat(r(t)):e}},857:(t,e,r)=>{var n=r(7854);t.exports=n},1320:(t,e,r)=>{var n=r(7854),o=r(8880),i=r(6656),s=r(3505),a=r(2788),u=r(9909),c=u.get,f=u.enforce,h=String(String).split("String");(t.exports=function(t,e,r,a){var u=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof e||i(r,"name")||o(r,"name",e),f(r).source=h.join("string"==typeof e?e:"")),t!==n?(u?!l&&t[e]&&(c=!0):delete t[e],c?t[e]=r:o(t,e,r)):c?t[e]=r:s(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},4488:t=>{t.exports=function(t){if(null==t)throw TypeError("Can\'t call method on "+t);return t}},3505:(t,e,r)=>{var n=r(7854),o=r(8880);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},6200:(t,e,r)=>{var n=r(2309),o=r(9711),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:(t,e,r)=>{var n=r(7854),o=r(3505),i="__core-js_shared__",s=n[i]||o(i,{});t.exports=s},2309:(t,e,r)=>{var n=r(1913),o=r(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.5.0",mode:n?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},261:(t,e,r)=>{var n,o,i,s=r(7854),a=r(7293),u=r(4326),c=r(244),f=r(490),h=r(317),l=r(9747),p=s.location,d=s.setImmediate,y=s.clearImmediate,_=s.process,v=s.MessageChannel,m=s.Dispatch,g=0,w={},b="onreadystatechange",x=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},S=function(t){return function(){x(t)}},I=function(t){x(t.data)},O=function(t){s.postMessage(t+"",p.protocol+"//"+p.host)};d&&y||(d=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return w[++g]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},n(g),g},y=function(t){delete w[t]},"process"==u(_)?n=function(t){_.nextTick(S(t))}:m&&m.now?n=function(t){m.now(S(t))}:v&&!l?(i=(o=new v).port2,o.port1.onmessage=I,n=c(i.postMessage,i,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||a(O)?n=b in h("script")?function(t){f.appendChild(h("script")).onreadystatechange=function(){f.removeChild(this),x(t)}}:function(t){setTimeout(S(t),0)}:(n=O,s.addEventListener("message",I,!1))),t.exports={set:d,clear:y}},1400:(t,e,r)=>{var n=r(9958),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5656:(t,e,r)=>{var n=r(8361),o=r(4488);t.exports=function(t){return n(o(t))}},9958:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},7466:(t,e,r)=>{var n=r(9958),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},7593:(t,e,r)=>{var n=r(111);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can\'t convert object to primitive value")}},9711:t=>{var e=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+r).toString(36)}},227:(t,e,r)=>{var n=r(5005);t.exports=n("navigator","userAgent")||""},4633:(t,e,r)=>{var n=r(2109),o=r(7854),i=r(261);n({global:!0,bind:!0,enumerable:!0,forced:!o.setImmediate||!o.clearImmediate},{setImmediate:i.set,clearImmediate:i.clear})},4301:(t,e,r)=>{r(7147),t.exports=self.fetch.bind(self)},7147:(t,e,r)=>{"use strict";r.r(e),r.d(e,{DOMException:()=>O,Headers:()=>d,Request:()=>b,Response:()=>S,fetch:()=>E});var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),a="FormData"in n,u="ArrayBuffer"in n;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\\-#$%&\'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError(\'Invalid character in header field name: "\'+t+\'"\');return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function _(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function v(t){var e=new FileReader,r=_(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:a&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u&&s&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(t)||f(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=y(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(v)}),this.text=function(){var t,e,r,n=y(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=_(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=l(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=l(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),p(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),p(t)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){if(!(this instanceof b))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');var r,n,o=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function x(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\\+/g," "),o=r.join("=").replace(/\\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function S(t,e){if(!(this instanceof S))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var I=[301,302,303,307,308];S.redirect=function(t,e){if(-1===I.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})};var O=n.DOMException;try{new O}catch(t){(O=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function E(t,e){return new Promise((function(r,o){var i=new b(t,e);if(i.signal&&i.signal.aborted)return o(new O("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\\r?\\n[\\t ]+/g," ").split("\\r").map((function(t){return 0===t.indexOf("\\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){r(new S(o,n))}),0)},a.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){o(new O("Aborted","AbortError"))}),0)},a.open(i.method,function(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(s?a.responseType="blob":u&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof d?i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){a.setRequestHeader(t,l(e.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",c)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}E.polyfill=!0,n.fetch||(n.fetch=E,n.Headers=d,n.Request=b,n.Response=S)},4643:t=>{t.exports="b0ba3a9920e211ed"},7673:t=>{t.exports="b0349aeb4e32c9dc"},1117:t=>{t.exports="b537b81ef05b4bbc"},5349:t=>{t.exports="89d16617b0d3d060"},2380:t=>{function e(t){var e=new Error("Cannot find module \'"+t+"\'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=2380,t.exports=e}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";r(4633),r(4301),r(7932);"object"==typeof window&&(window._babelPolyfill=!1);const t=function t(e){let r;return r=e instanceof Error?e:new Error(e),Object.setPrototypeOf(r,t.prototype),r};t.prototype=Object.create(Error.prototype,{name:{value:"PSPDFKitError",enumerable:!1}});const e=t;function n(t,r){if(!t)throw new e(`Assertion failed: ${r||"Condition not met"}\\n\\nFor further assistance, please go to: https://pspdfkit.com/support/request`)}function o(t){console.log(t)}function i(t){console.warn(t)}function s(t){console.error(t)}["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",\'[tabindex]:not([tabindex^="-"])\'].join(",");function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent;return t.indexOf("Trident/")>-1?"trident":t.indexOf("Edge/")>-1?"edge":t.indexOf("Chrome/")>-1?"blink":t.indexOf("AppleWebKit/")>-1?"webkit":t.indexOf("Gecko/")>-1?"gecko":"unknown"}function u(t,e){const r=new RegExp(` ${e}/(\\\\d+)\\\\.*`);let n;return(n=t.match(r))?Number(n[1]):0}function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.platform,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.maxTouchPoints;return e.indexOf("MacIntel")>-1&&r>1?"ios":t.indexOf("Win")>-1?"windows":t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1?"ios":t.indexOf("Mac")>-1?"macos":t.indexOf("Android")>-1?"android":t.indexOf("Linux")>-1?"linux":"unknown"}const f=a(),h=c(),l=(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent;switch(a(t)){case"trident":return u(t,"Trident");case"edge":return u(t,"Edge");case"blink":return u(t,"Chrome");case"webkit":return u(t,"Version");case"gecko":return u(t,"Firefox");default:;}}(),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();"ios"===t||"android"===t||p(e)}(),"trident"===f);"ios"===h||p();function p(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a();return("undefined"==typeof window||!window.PSPDFKIT_PLAYWRIGHT_TEST)&&("webkit"===t&&"undefined"!=typeof TouchEvent)}let d;"undefined"!=typeof window&&(window.addEventListener("mousemove",(function t(){d=!1,window.removeEventListener("mousemove",t)})),window.addEventListener("pointermove",(function t(e){"mouse"!==e.pointerType&&"pen"!==e.pointerType||(d=!1),window.removeEventListener("pointermove",t)})));/Mac/i.test(navigator.platform);var y=r(1117),_=r.n(y),v=r(5349),m=r.n(v),g=r(4643),w=r.n(g),b=r(7673),x=r.n(b);const S="modern/pspdfkit-lib/",I=`${S}pspdfkit${"-"+m()}.wasm.js`,O=`${S}pspdfkit${"-"+_()}.wasm`,E=`${S}pspdfkit${"-"+w()}.asm.js`,A=`${S}pspdfkit${"-"+x()}.asm.js.mem`;function k(t){try{if(/Version\\/11\\..*Safari/i.test(t.navigator.userAgent))return!1}catch(t){}return"object"==typeof t.WebAssembly&&"function"==typeof t.WebAssembly.instantiate}function D(t,e,r){const n=r?11649062:31995433;const a={wasmBinaryFile:t+O,locateFile:e=>"pspdfkit.asm.js.mem"===e?t+A:e,wasmBinary:undefined};if(r){const t=fetch(a.wasmBinaryFile,{credentials:"same-origin"});t.then((t=>{const e=t.headers.get("content-length");return e&&parseInt(e)>=n&&i("The WASM binary file is being served without compression. Due to its size, it\'s recommended to configure the server so application/wasm files are served with compression.\\n\\nFind more details in our Standalone performance guides: https://pspdfkit.com/guides/web/best-practices/performance/#standalone-performance"),t})).catch((t=>{throw new Error(`Failed to load WASM binary file: ${t}`)})),a.instantiateWasm=(r,n)=>((async()=>{o(`Start ${a.wasmBinaryFile} download.`);const i=Date.now();let u,c;const h=!e&&"function"==typeof WebAssembly.instantiateStreaming;function l(){return t.then((t=>{if(!t.ok)throw new Error(`Error loading ${a.wasmBinaryFile}: ${t.statusText}`);return t.arrayBuffer()})).then((t=>(c=Date.now(),o(`Download complete, took: ${c-i}ms`),WebAssembly.instantiate(new Uint8Array(t),r))))}if(h){if("edge"===f){const t=WebAssembly.instantiateStreaming;WebAssembly.instantiateStreaming=function(e,r){return Promise.resolve(e).then((e=>t(e,r)))}}u=WebAssembly.instantiateStreaming(t,r).then((t=>(c=Date.now(),o(`Download and Instantiation complete, took: ${Date.now()-i}ms`),t))).catch((t=>{if(/mime.*type/i.test(t.message))return s(t.message),null;throw t}))}else u=l();let p=await u;null===p&&(s("Streaming instantiation failed! Falling back to classic instantiation. This might result in slower initialization time therefore we highly recommend to follow the troubleshooting instructions in our guides to fix this error: https://pspdfkit.com/guides/web/current/troubleshooting/common-issues/#response-has-unsupported-mime-type-error."),p=await l()),!h&&c&&o(`Compilation and Instantiation complete, took: ${Date.now()-c}ms`),n(p.instance,p.module)})(),{})}return a}function j(t){t.PSPDFLoggingServices={error(t,e){s(`[${t}] ${e}`)},warn(t,e){i(`[${t}] ${e}`)},info(t,e){0},debug(t,e){0},trace(t,e){0}}}function F(t){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node?Promise.resolve(r(2380)(t)):"object"==typeof window?new Promise(((e,r)=>{const o=document.createElement("script");o.type="text/javascript",o.async=!0,o.onload=()=>e(window.PSPDFModuleInit),o.onerror=r,o.src=t;const{documentElement:i}=document;n(i),i.appendChild(o)})):(self.importScripts(t),Promise.resolve(self.PSPDFModuleInit))}function z(t){const e=new FileReader;return new Promise(((r,n)=>{e.onerror=t=>{n(new Error(t))},e.onload=t=>{var e;r(new Uint8Array(null===(e=t.target)||void 0===e?void 0:e.result))},e.readAsArrayBuffer(t)}))}const M="text",B="documentA",T="documentB",P="result";function R(t){let e="";for(let r,n=t.length,o=0;o<n;o++)r=t[o],e+=String.fromCodePoint(r>251&&r<254&&o+5<n?1073741824*(r-252)+(t[++o]-128<<24)+(t[++o]-128<<18)+(t[++o]-128<<12)+(t[++o]-128<<6)+t[++o]-128:r>247&&r<252&&o+4<n?(r-248<<24)+(t[++o]-128<<18)+(t[++o]-128<<12)+(t[++o]-128<<6)+t[++o]-128:r>239&&r<248&&o+3<n?(r-240<<18)+(t[++o]-128<<12)+(t[++o]-128<<6)+t[++o]-128:r>223&&r<240&&o+2<n?(r-224<<12)+(t[++o]-128<<6)+t[++o]-128:r>191&&r<224&&o+1<n?(r-192<<6)+t[++o]-128:r);return e}var C=32,q=31,N={};function L(t){t&&(t.value=!0)}function U(){}function $(t){return void 0===t.size&&(t.size=t.__iterate(V)),t.size}function J(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?$(t)+e:e}function V(){return!0}function K(t,e,r){return(0===t&&!X(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function W(t,e){return H(t,e,0)}function G(t,e){return H(t,e,e)}function H(t,e,r){return void 0===t?r:X(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function X(t){return t<0||0===t&&1/t==-1/0}var Y="@@__IMMUTABLE_ITERABLE__@@";function Q(t){return Boolean(t&&t[Y])}var Z="@@__IMMUTABLE_KEYED__@@";function tt(t){return Boolean(t&&t[Z])}var et="@@__IMMUTABLE_INDEXED__@@";function rt(t){return Boolean(t&&t[et])}function nt(t){return tt(t)||rt(t)}var ot=function(t){return Q(t)?t:At(t)},it=function(t){function e(t){return tt(t)?t:kt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ot),st=function(t){function e(t){return rt(t)?t:Dt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ot),at=function(t){function e(t){return Q(t)&&!nt(t)?t:jt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ot);ot.Keyed=it,ot.Indexed=st,ot.Set=at;var ut="@@__IMMUTABLE_SEQ__@@";function ct(t){return Boolean(t&&t[ut])}var ft="@@__IMMUTABLE_RECORD__@@";function ht(t){return Boolean(t&&t[ft])}function lt(t){return Q(t)||ht(t)}var pt="@@__IMMUTABLE_ORDERED__@@";function dt(t){return Boolean(t&&t[pt])}var yt="function"==typeof Symbol&&Symbol.iterator,_t="@@iterator",vt=yt||_t,mt=function(t){this.next=t};function gt(t,e,r,n){var o=0===t?e:1===t?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function wt(){return{value:void 0,done:!0}}function bt(t){return!!It(t)}function xt(t){return t&&"function"==typeof t.next}function St(t){var e=It(t);return e&&e.call(t)}function It(t){var e=t&&(yt&&t[yt]||t["@@iterator"]);if("function"==typeof e)return e}mt.prototype.toString=function(){return"[Iterator]"},mt.KEYS=0,mt.VALUES=1,mt.ENTRIES=2,mt.prototype.inspect=mt.prototype.toSource=function(){return this.toString()},mt.prototype[vt]=function(){return this};var Ot=Object.prototype.hasOwnProperty;function Et(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var At=function(t){function e(t){return null==t?Tt():lt(t)?t.toSeq():function(t){var e=Ct(t);if(e)return e;if("object"==typeof t)return new zt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,o=0;o!==n;){var i=r[e?n-++o:o++];if(!1===t(i[1],i[0],this))break}return o}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var n=r.length,o=0;return new mt((function(){if(o===n)return{value:void 0,done:!0};var i=r[e?n-++o:o++];return gt(t,i[0],i[1])}))}return this.__iteratorUncached(t,e)},e}(ot),kt=function(t){function e(t){return null==t?Tt().toKeyedSeq():Q(t)?tt(t)?t.toSeq():t.fromEntrySeq():ht(t)?t.toSeq():Pt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(At),Dt=function(t){function e(t){return null==t?Tt():Q(t)?tt(t)?t.entrySeq():t.toIndexedSeq():ht(t)?t.toSeq().entrySeq():Rt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(At),jt=function(t){function e(t){return(Q(t)&&!nt(t)?t:Dt(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(At);At.isSeq=ct,At.Keyed=kt,At.Set=jt,At.Indexed=Dt,At.prototype[ut]=!0;var Ft=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[J(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,o=0;o!==n;){var i=e?n-++o:o++;if(!1===t(r[i],i,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._array,n=r.length,o=0;return new mt((function(){if(o===n)return{value:void 0,done:!0};var i=e?n-++o:o++;return gt(t,i,r[i])}))},e}(Dt),zt=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Ot.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,o=n.length,i=0;i!==o;){var s=n[e?o-++i:i++];if(!1===t(r[s],s,this))break}return i},e.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,o=n.length,i=0;return new mt((function(){if(i===o)return{value:void 0,done:!0};var s=n[e?o-++i:i++];return gt(t,s,r[s])}))},e}(kt);zt.prototype[pt]=!0;var Mt,Bt=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=St(this._collection),n=0;if(xt(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,n++,this););return n},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=St(this._collection);if(!xt(r))return new mt(wt);var n=0;return new mt((function(){var e=r.next();return e.done?e:gt(t,n++,e.value)}))},e}(Dt);function Tt(){return Mt||(Mt=new Ft([]))}function Pt(t){var e=Array.isArray(t)?new Ft(t):bt(t)?new Bt(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new zt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function Rt(t){var e=Ct(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function Ct(t){return Et(t)?new Ft(t):bt(t)?new Bt(t):void 0}var qt="@@__IMMUTABLE_MAP__@@";function Nt(t){return Boolean(t&&t[qt])}function Lt(t){return Nt(t)&&dt(t)}function Ut(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function $t(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(Ut(t)&&Ut(e)&&t.equals(e))}var Jt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function Vt(t){return t>>>1&1073741824|3221225471&t}function Kt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)r^=t/=4294967295;return Vt(r)}if("string"===e)return t.length>te?function(t){var e=ne[t];void 0===e&&(e=Wt(t),re===ee&&(re=0,ne={}),re++,ne[t]=e);return e}(t):Wt(t);if("function"==typeof t.hashCode)return Vt(t.hashCode());if("object"===e||"function"===e)return function(t){var e;if(Yt&&void 0!==(e=Xt.get(t)))return e;if(void 0!==(e=t[Zt]))return e;if(!Ht){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Zt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++Qt,1073741824&Qt&&(Qt=0);if(Yt)Xt.set(t,e);else{if(void 0!==Gt&&!1===Gt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Ht)Object.defineProperty(t,Zt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Zt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Zt]=e}}return e}(t);if("function"==typeof t.toString)return Wt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function Wt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return Vt(e)}var Gt=Object.isExtensible,Ht=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var Xt,Yt="function"==typeof WeakMap;Yt&&(Xt=new WeakMap);var Qt=0,Zt="__immutablehash__";"function"==typeof Symbol&&(Zt=Symbol(Zt));var te=16,ee=255,re=0,ne={},oe=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=fe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=ce(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e,n){return t(e,n,r)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(kt);oe.prototype[pt]=!0;var ie=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,n=0;return e&&$(this),this._iter.__iterate((function(o){return t(o,e?r.size-++n:n++,r)}),e)},e.prototype.__iterator=function(t,e){var r=this,n=this._iter.__iterator(1,e),o=0;return e&&$(this),new mt((function(){var i=n.next();return i.done?i:gt(t,e?r.size-++o:o++,i.value,i)}))},e}(Dt),se=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new mt((function(){var e=r.next();return e.done?e:gt(t,e.value,e.value,e)}))},e}(jt),ae=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){be(e);var n=Q(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new mt((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){be(n);var o=Q(n);return gt(t,o?n.get(0):n[0],o?n.get(1):n[1],e)}}}))},e}(kt);function ue(t){var e=Se(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ie,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(2===e){var n=t.__iterator(e,r);return new mt((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,r)},e}function ce(t,e,r){var n=Se(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,o){var i=t.get(n,N);return i===N?o:e.call(r,i,n,t)},n.__iterateUncached=function(n,o){var i=this;return t.__iterate((function(t,o,s){return!1!==n(e.call(r,t,o,s),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=t.__iterator(2,o);return new mt((function(){var o=i.next();if(o.done)return o;var s=o.value,a=s[0];return gt(n,a,e.call(r,s[1],a,t),o)}))},n}function fe(t,e){var r=this,n=Se(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=ue(t);return e.reverse=function(){return t.flip()},e}),n.get=function(r,n){return t.get(e?r:-1-r,n)},n.has=function(r){return t.has(e?r:-1-r)},n.includes=function(e){return t.includes(e)},n.cacheResult=Ie,n.__iterate=function(r,n){var o=this,i=0;return n&&$(t),t.__iterate((function(t,s){return r(t,e?s:n?o.size-++i:i++,o)}),!n)},n.__iterator=function(n,o){var i=0;o&&$(t);var s=t.__iterator(2,!o);return new mt((function(){var t=s.next();if(t.done)return t;var a=t.value;return gt(n,e?a[0]:o?r.size-++i:i++,a[1],t)}))},n}function he(t,e,r,n){var o=Se(t);return n&&(o.has=function(n){var o=t.get(n,N);return o!==N&&!!e.call(r,o,n,t)},o.get=function(n,o){var i=t.get(n,N);return i!==N&&e.call(r,i,n,t)?i:o}),o.__iterateUncached=function(o,i){var s=this,a=0;return t.__iterate((function(t,i,u){if(e.call(r,t,i,u))return a++,o(t,n?i:a-1,s)}),i),a},o.__iteratorUncached=function(o,i){var s=t.__iterator(2,i),a=0;return new mt((function(){for(;;){var i=s.next();if(i.done)return i;var u=i.value,c=u[0],f=u[1];if(e.call(r,f,c,t))return gt(o,n?c:a++,f,i)}}))},o}function le(t,e,r,n){var o=t.size;if(K(e,r,o))return t;var i=W(e,o),s=G(r,o);if(i!=i||s!=s)return le(t.toSeq().cacheResult(),e,r,n);var a,u=s-i;u==u&&(a=u<0?0:u);var c=Se(t);return c.size=0===a?a:t.size&&a||void 0,!n&&ct(t)&&a>=0&&(c.get=function(e,r){return(e=J(this,e))>=0&&e<a?t.get(e+i,r):r}),c.__iterateUncached=function(e,r){var o=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(e,r);var s=0,u=!0,c=0;return t.__iterate((function(t,r){if(!u||!(u=s++<i))return c++,!1!==e(t,n?r:c-1,o)&&c!==a})),c},c.__iteratorUncached=function(e,r){if(0!==a&&r)return this.cacheResult().__iterator(e,r);if(0===a)return new mt(wt);var o=t.__iterator(e,r),s=0,u=0;return new mt((function(){for(;s++<i;)o.next();if(++u>a)return{value:void 0,done:!0};var t=o.next();return n||1===e||t.done?t:gt(e,u-1,0===e?void 0:t.value[1],t)}))},c}function pe(t,e,r,n){var o=Se(t);return o.__iterateUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterate(o,i);var a=!0,u=0;return t.__iterate((function(t,i,c){if(!a||!(a=e.call(r,t,i,c)))return u++,o(t,n?i:u-1,s)})),u},o.__iteratorUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterator(o,i);var a=t.__iterator(2,i),u=!0,c=0;return new mt((function(){var t,i,f;do{if((t=a.next()).done)return n||1===o?t:gt(o,c++,0===o?void 0:t.value[1],t);var h=t.value;i=h[0],f=h[1],u&&(u=e.call(r,f,i,s))}while(u);return 2===o?t:gt(o,i,f,t)}))},o}function de(t,e){var r=tt(t),n=[t].concat(e).map((function(t){return Q(t)?r&&(t=it(t)):t=r?Pt(t):Rt(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===n.length)return t;if(1===n.length){var o=n[0];if(o===t||r&&tt(o)||rt(t)&&rt(o))return o}var i=new Ft(n);return r?i=i.toKeyedSeq():rt(t)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=n.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),i}function ye(t,e,r){var n=Se(t);return n.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var s=0,a=!1;return function t(u,c){u.__iterate((function(i,u){return(!e||c<e)&&Q(i)?t(i,c+1):(s++,!1===o(i,r?u:s-1,n)&&(a=!0)),!a}),i)}(t,0),s},n.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var i=t.__iterator(n,o),s=[],a=0;return new mt((function(){for(;i;){var t=i.next();if(!1===t.done){var u=t.value;if(2===n&&(u=u[1]),e&&!(s.length<e)||!Q(u))return r?t:gt(n,a++,u,t);s.push(i),i=u.__iterator(n,o)}else i=s.pop()}return{value:void 0,done:!0}}))},n}function _e(t,e,r){e||(e=Oe);var n=tt(t),o=0,i=t.toSeq().map((function(e,n){return[n,e,o++,r?r(e,n,t):e]})).valueSeq().toArray();return i.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),n?kt(i):rt(t)?Dt(i):jt(i)}function ve(t,e,r){if(e||(e=Oe),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return me(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return me(e,t,r)?r:t}))}function me(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function ge(t,e,r,n){var o=Se(t),i=new Ft(r).map((function(t){return t.size}));return o.size=n?i.max():i.min(),o.__iterate=function(t,e){for(var r,n=this.__iterator(1,e),o=0;!(r=n.next()).done&&!1!==t(r.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=r.map((function(t){return t=ot(t),St(o?t.reverse():t)})),s=0,a=!1;return new mt((function(){var r;return a||(r=i.map((function(t){return t.next()})),a=n?r.every((function(t){return t.done})):r.some((function(t){return t.done}))),a?{value:void 0,done:!0}:gt(t,s++,e.apply(null,r.map((function(t){return t.value}))))}))},o}function we(t,e){return t===e?t:ct(t)?e:t.constructor(e)}function be(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function xe(t){return tt(t)?it:rt(t)?st:at}function Se(t){return Object.create((tt(t)?kt:rt(t)?Dt:jt).prototype)}function Ie(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):At.prototype.cacheResult.call(this)}function Oe(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Ee(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function Ae(t,e){if(!t)throw new Error(e)}function ke(t){Ae(t!==1/0,"Cannot perform this action with an infinite size.")}function De(t){if(Et(t)&&"string"!=typeof t)return t;if(dt(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function je(t){return t&&(t.constructor&&"Object"===t.constructor.name||void 0===t.constructor)}function Fe(t){return"object"==typeof t&&(lt(t)||Array.isArray(t)||je(t))}function ze(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Me(t,e){return lt(t)?t.has(e):Fe(t)&&Ot.call(t,e)}function Be(t,e,r){return lt(t)?t.get(e,r):Me(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function Te(t){if(Array.isArray(t))return Ee(t);var e={};for(var r in t)Ot.call(t,r)&&(e[r]=t[r]);return e}function Pe(t,e){if(!Fe(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(lt(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Ot.call(t,e))return t;var r=Te(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Re(t,e,r){if(!Fe(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(lt(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(Ot.call(t,e)&&r===t[e])return t;var n=Te(t);return n[e]=r,n}function Ce(t,e,r,n){n||(n=r,r=void 0);var o=qe(lt(t),t,De(e),0,r,n);return o===N?r:o}function qe(t,e,r,n,o,i){var s=e===N;if(n===r.length){var a=s?o:e,u=i(a);return u===a?e:u}if(!s&&!Fe(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(ze)+"]: "+e);var c=r[n],f=s?N:Be(e,c,N),h=qe(f===N?t:lt(f),f,r,n+1,o,i);return h===f?e:h===N?Pe(e,c):Re(s?t?mr():{}:e,c,h)}function Ne(t,e,r){return Ce(t,e,N,(function(){return r}))}function Le(t,e){return Ne(this,t,e)}function Ue(t,e){return Ce(t,e,(function(){return N}))}function $e(t){return Ue(this,t)}function Je(t,e,r,n){return Ce(t,[e],r,n)}function Ve(t,e,r){return 1===arguments.length?t(this):Je(this,t,e,r)}function Ke(t,e,r){return Ce(this,t,e,r)}function We(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return He(this,t)}function Ge(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return He(this,e,t)}function He(t,e,r){for(var n=[],o=0;o<e.length;o++){var i=it(e[o]);0!==i.size&&n.push(i)}return 0===n.length?t:0!==t.toSeq().size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var e=r?function(e,n){Je(t,n,N,(function(t){return t===N?e:r(t,e,n)}))}:function(e,r){t.set(r,e)},o=0;o<n.length;o++)n[o].forEach(e)})):t.constructor(n[0])}function Xe(t,e,r){return Ye(t,e,function(t){function e(r,n,o){return Fe(r)&&Fe(n)?Ye(r,[n],e):t?t(r,n,o):n}return e}(r))}function Ye(t,e,r){if(!Fe(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(lt(t))return"function"==typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),o=t,i=n?st:it,s=n?function(e){o===t&&(o=Te(o)),o.push(e)}:function(e,n){var i=Ot.call(o,n),s=i&&r?r(o[n],e,n):e;i&&s===o[n]||(o===t&&(o=Te(o)),o[n]=s)},a=0;a<e.length;a++)i(e[a]).forEach(s);return o}function Qe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Xe(this,t)}function Ze(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Xe(this,e,t)}function tr(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ce(this,t,mr(),(function(t){return Ye(t,e)}))}function er(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ce(this,t,mr(),(function(t){return Xe(t,e)}))}function rr(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function nr(){return this.__ownerID?this:this.__ensureOwner(new U)}function or(){return this.__ensureOwner()}function ir(){return this.__altered}ie.prototype.cacheResult=oe.prototype.cacheResult=se.prototype.cacheResult=ae.prototype.cacheResult=Ie;var sr=function(t){function e(e){return null==e?mr():Nt(e)&&!dt(e)?e:mr().withMutations((function(r){var n=t(e);ke(n.size),n.forEach((function(t,e){return r.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return mr().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return gr(this,t,e)},e.prototype.remove=function(t){return gr(this,t,N)},e.prototype.deleteAll=function(t){var e=ot(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):mr()},e.prototype.sort=function(t){return Jr(_e(this,t))},e.prototype.sortBy=function(t,e){return Jr(_e(this,e,t))},e.prototype.map=function(t,e){return this.withMutations((function(r){r.forEach((function(n,o){r.set(o,t.call(e,n,o,r))}))}))},e.prototype.__iterator=function(t,e){return new dr(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?vr(this.size,this._root,t,this.__hash):0===this.size?mr():(this.__ownerID=t,this.__altered=!1,this)},e}(it);sr.isMap=Nt;var ar=sr.prototype;ar[qt]=!0,ar.delete=ar.remove,ar.removeAll=ar.deleteAll,ar.setIn=Le,ar.removeIn=ar.deleteIn=$e,ar.update=Ve,ar.updateIn=Ke,ar.merge=ar.concat=We,ar.mergeWith=Ge,ar.mergeDeep=Qe,ar.mergeDeepWith=Ze,ar.mergeIn=tr,ar.mergeDeepIn=er,ar.withMutations=rr,ar.wasAltered=ir,ar.asImmutable=or,ar["@@transducer/init"]=ar.asMutable=nr,ar["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},ar["@@transducer/result"]=function(t){return t.asImmutable()};var ur=function(t,e){this.ownerID=t,this.entries=e};ur.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,s=o.length;i<s;i++)if($t(r,o[i][0]))return o[i][1];return n},ur.prototype.update=function(t,e,r,n,o,i,s){for(var a=o===N,u=this.entries,c=0,f=u.length;c<f&&!$t(n,u[c][0]);c++);var h=c<f;if(h?u[c][1]===o:a)return this;if(L(s),(a||!h)&&L(i),!a||1!==u.length){if(!h&&!a&&u.length>=Or)return function(t,e,r,n){t||(t=new U);for(var o=new lr(t,Kt(r),[r,n]),i=0;i<e.length;i++){var s=e[i];o=o.update(t,0,void 0,s[0],s[1])}return o}(t,u,n,o);var l=t&&t===this.ownerID,p=l?u:Ee(u);return h?a?c===f-1?p.pop():p[c]=p.pop():p[c]=[n,o]:p.push([n,o]),l?(this.entries=p,this):new ur(t,p)}};var cr=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};cr.prototype.get=function(t,e,r,n){void 0===e&&(e=Kt(r));var o=1<<((0===t?e:e>>>t)&q),i=this.bitmap;return 0==(i&o)?n:this.nodes[Sr(i&o-1)].get(t+5,e,r,n)},cr.prototype.update=function(t,e,r,n,o,i,s){void 0===r&&(r=Kt(n));var a=(0===e?r:r>>>e)&q,u=1<<a,c=this.bitmap,f=0!=(c&u);if(!f&&o===N)return this;var h=Sr(c&u-1),l=this.nodes,p=f?l[h]:void 0,d=wr(p,t,e+5,r,n,o,i,s);if(d===p)return this;if(!f&&d&&l.length>=Er)return function(t,e,r,n,o){for(var i=0,s=new Array(C),a=0;0!==r;a++,r>>>=1)s[a]=1&r?e[i++]:void 0;return s[n]=o,new fr(t,i+1,s)}(t,l,c,a,d);if(f&&!d&&2===l.length&&br(l[1^h]))return l[1^h];if(f&&d&&1===l.length&&br(d))return d;var y=t&&t===this.ownerID,_=f?d?c:c^u:c|u,v=f?d?Ir(l,h,d,y):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),i=0,s=0;s<n;s++)s===e&&(i=1),o[s]=t[s+i];return o}(l,h,y):function(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var i=new Array(o),s=0,a=0;a<o;a++)a===e?(i[a]=r,s=-1):i[a]=t[a+s];return i}(l,h,d,y);return y?(this.bitmap=_,this.nodes=v,this):new cr(t,_,v)};var fr=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};fr.prototype.get=function(t,e,r,n){void 0===e&&(e=Kt(r));var o=(0===t?e:e>>>t)&q,i=this.nodes[o];return i?i.get(t+5,e,r,n):n},fr.prototype.update=function(t,e,r,n,o,i,s){void 0===r&&(r=Kt(n));var a=(0===e?r:r>>>e)&q,u=o===N,c=this.nodes,f=c[a];if(u&&!f)return this;var h=wr(f,t,e+5,r,n,o,i,s);if(h===f)return this;var l=this.count;if(f){if(!h&&--l<Ar)return function(t,e,r,n){for(var o=0,i=0,s=new Array(r),a=0,u=1,c=e.length;a<c;a++,u<<=1){var f=e[a];void 0!==f&&a!==n&&(o|=u,s[i++]=f)}return new cr(t,o,s)}(t,c,l,a)}else l++;var p=t&&t===this.ownerID,d=Ir(c,a,h,p);return p?(this.count=l,this.nodes=d,this):new fr(t,l,d)};var hr=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};hr.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,s=o.length;i<s;i++)if($t(r,o[i][0]))return o[i][1];return n},hr.prototype.update=function(t,e,r,n,o,i,s){void 0===r&&(r=Kt(n));var a=o===N;if(r!==this.keyHash)return a?this:(L(s),L(i),xr(this,t,e,r,[n,o]));for(var u=this.entries,c=0,f=u.length;c<f&&!$t(n,u[c][0]);c++);var h=c<f;if(h?u[c][1]===o:a)return this;if(L(s),(a||!h)&&L(i),a&&2===f)return new lr(t,this.keyHash,u[1^c]);var l=t&&t===this.ownerID,p=l?u:Ee(u);return h?a?c===f-1?p.pop():p[c]=p.pop():p[c]=[n,o]:p.push([n,o]),l?(this.entries=p,this):new hr(t,this.keyHash,p)};var lr=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};lr.prototype.get=function(t,e,r,n){return $t(r,this.entry[0])?this.entry[1]:n},lr.prototype.update=function(t,e,r,n,o,i,s){var a=o===N,u=$t(n,this.entry[0]);return(u?o===this.entry[1]:a)?this:(L(s),a?void L(i):u?t&&t===this.ownerID?(this.entry[1]=o,this):new lr(t,this.keyHash,[n,o]):(L(i),xr(this,t,e,Kt(n),[n,o])))},ur.prototype.iterate=hr.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===t(r[e?o-n:n]))return!1},cr.prototype.iterate=fr.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[e?o-n:n];if(i&&!1===i.iterate(t,e))return!1}},lr.prototype.iterate=function(t,e){return t(this.entry)};var pr,dr=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&_r(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this,e=this._type,r=this._stack;r;){var n=r.node,o=r.index++,i=void 0;if(n.entry){if(0===o)return yr(e,n.entry)}else if(n.entries){if(o<=(i=n.entries.length-1))return yr(e,n.entries[t._reverse?i-o:o])}else if(o<=(i=n.nodes.length-1)){var s=n.nodes[t._reverse?i-o:o];if(s){if(s.entry)return yr(e,s.entry);r=t._stack=_r(s,r)}continue}r=t._stack=t._stack.__prev}return{value:void 0,done:!0}},e}(mt);function yr(t,e){return gt(t,e[0],e[1])}function _r(t,e){return{node:t,index:0,__prev:e}}function vr(t,e,r,n){var o=Object.create(ar);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function mr(){return pr||(pr=vr(0))}function gr(t,e,r){var n,o;if(t._root){var i={value:!1},s={value:!1};if(n=wr(t._root,t.__ownerID,0,void 0,e,r,i,s),!s.value)return t;o=t.size+(i.value?r===N?-1:1:0)}else{if(r===N)return t;o=1,n=new ur(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?vr(o,n):mr()}function wr(t,e,r,n,o,i,s,a){return t?t.update(e,r,n,o,i,s,a):i===N?t:(L(a),L(s),new lr(e,n,[o,i]))}function br(t){return t.constructor===lr||t.constructor===hr}function xr(t,e,r,n,o){if(t.keyHash===n)return new hr(e,n,[t.entry,o]);var i,s=(0===r?t.keyHash:t.keyHash>>>r)&q,a=(0===r?n:n>>>r)&q,u=s===a?[xr(t,e,r+5,n,o)]:(i=new lr(e,n,o),s<a?[t,i]:[i,t]);return new cr(e,1<<s|1<<a,u)}function Sr(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Ir(t,e,r,n){var o=n?t:Ee(t);return o[e]=r,o}var Or=8,Er=16,Ar=8,kr="@@__IMMUTABLE_LIST__@@";function Dr(t){return Boolean(t&&t[kr])}var jr=function(t){function e(e){var r=Rr();if(null==e)return r;if(Dr(e))return e;var n=t(e),o=n.size;return 0===o?r:(ke(o),o>0&&o<C?Pr(0,o,5,null,new zr(n.toArray())):r.withMutations((function(t){t.setSize(o),n.forEach((function(e,r){return t.set(r,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=J(this,t))>=0&&t<this.size){var r=Nr(this,t+=this._origin);return r&&r.array[t&q]}return e},e.prototype.set=function(t,e){return function(t,e,r){if((e=J(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?Lr(t,e).set(0,r):Lr(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,o=t._root,i={value:!1};e>=Ur(t._capacity)?n=Cr(n,t.__ownerID,0,e,r,i):o=Cr(o,t.__ownerID,t._level,e,r,i);if(!i.value)return t;if(t.__ownerID)return t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return Pr(t._origin,t._capacity,t._level,o,n)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Rr()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){Lr(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},e.prototype.pop=function(){return Lr(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){Lr(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},e.prototype.shift=function(){return Lr(this,1)},e.prototype.concat=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++){var o=e[n],i=t("string"!=typeof o&&bt(o)?o:[o]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(t){r.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(r[0])},e.prototype.setSize=function(t){return Lr(this,0,t)},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){for(var o=0;o<r.size;o++)n.set(o,t.call(e,n.get(o),o,n))}))},e.prototype.slice=function(t,e){var r=this.size;return K(t,e,r)?this:Lr(this,W(t,r),G(e,r))},e.prototype.__iterator=function(t,e){var r=e?this.size:0,n=Tr(this,e);return new mt((function(){var o=n();return o===Br?{value:void 0,done:!0}:gt(t,e?--r:r++,o)}))},e.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,o=Tr(this,e);(r=o())!==Br&&!1!==t(r,e?--n:n++,this););return n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Pr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?Rr():(this.__ownerID=t,this.__altered=!1,this)},e}(st);jr.isList=Dr;var Fr=jr.prototype;Fr[kr]=!0,Fr.delete=Fr.remove,Fr.merge=Fr.concat,Fr.setIn=Le,Fr.deleteIn=Fr.removeIn=$e,Fr.update=Ve,Fr.updateIn=Ke,Fr.mergeIn=tr,Fr.mergeDeepIn=er,Fr.withMutations=rr,Fr.wasAltered=ir,Fr.asImmutable=or,Fr["@@transducer/init"]=Fr.asMutable=nr,Fr["@@transducer/step"]=function(t,e){return t.push(e)},Fr["@@transducer/result"]=function(t){return t.asImmutable()};var zr=function(t,e){this.array=t,this.ownerID=e};zr.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&q;if(n>=this.array.length)return new zr([],t);var o,i=0===n;if(e>0){var s=this.array[n];if((o=s&&s.removeBefore(t,e-5,r))===s&&i)return this}if(i&&!o)return this;var a=qr(this,t);if(!i)for(var u=0;u<n;u++)a.array[u]=void 0;return o&&(a.array[n]=o),a},zr.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,o=r-1>>>e&q;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((n=i&&i.removeAfter(t,e-5,r))===i&&o===this.array.length-1)return this}var s=qr(this,t);return s.array.splice(o+1),n&&(s.array[o]=n),s};var Mr,Br={};function Tr(t,e){var r=t._origin,n=t._capacity,o=Ur(n),i=t._tail;return s(t._root,t._level,0);function s(t,a,u){return 0===a?function(t,s){var a=s===o?i&&i.array:t&&t.array,u=s>r?0:r-s,c=n-s;c>C&&(c=C);return function(){if(u===c)return Br;var t=e?--c:u++;return a&&a[t]}}(t,u):function(t,o,i){var a,u=t&&t.array,c=i>r?0:r-i>>o,f=1+(n-i>>o);f>C&&(f=C);return function(){for(;;){if(a){var t=a();if(t!==Br)return t;a=null}if(c===f)return Br;var r=e?--f:c++;a=s(u&&u[r],o-5,i+(r<<o))}}}(t,a,u)}}function Pr(t,e,r,n,o,i,s){var a=Object.create(Fr);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=o,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function Rr(){return Mr||(Mr=Pr(0,0,5))}function Cr(t,e,r,n,o,i){var s,a=n>>>r&q,u=t&&a<t.array.length;if(!u&&void 0===o)return t;if(r>0){var c=t&&t.array[a],f=Cr(c,e,r-5,n,o,i);return f===c?t:((s=qr(t,e)).array[a]=f,s)}return u&&t.array[a]===o?t:(i&&L(i),s=qr(t,e),void 0===o&&a===s.array.length-1?s.array.pop():s.array[a]=o,s)}function qr(t,e){return e&&t&&e===t.ownerID?t:new zr(t?t.array.slice():[],e)}function Nr(t,e){if(e>=Ur(t._capacity))return t._tail;if(e<1<<t._level+5){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&q],n-=5;return r}}function Lr(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new U,o=t._origin,i=t._capacity,s=o+e,a=void 0===r?i:r<0?i+r:o+r;if(s===o&&a===i)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,f=0;s+f<0;)c=new zr(c&&c.array.length?[void 0,c]:[],n),f+=1<<(u+=5);f&&(s+=f,o+=f,a+=f,i+=f);for(var h=Ur(i),l=Ur(a);l>=1<<u+5;)c=new zr(c&&c.array.length?[c]:[],n),u+=5;var p=t._tail,d=l<h?Nr(t,a-1):l>h?new zr([],n):p;if(p&&l>h&&s<i&&p.array.length){for(var y=c=qr(c,n),_=u;_>5;_-=5){var v=h>>>_&q;y=y.array[v]=qr(y.array[v],n)}y.array[h>>>5&q]=p}if(a<i&&(d=d&&d.removeAfter(n,0,a)),s>=l)s-=l,a-=l,u=5,c=null,d=d&&d.removeBefore(n,0,s);else if(s>o||l<h){for(f=0;c;){var m=s>>>u&q;if(m!==l>>>u&q)break;m&&(f+=(1<<u)*m),u-=5,c=c.array[m]}c&&s>o&&(c=c.removeBefore(n,u,s-f)),c&&l<h&&(c=c.removeAfter(n,u,l-f)),f&&(s-=f,a-=f)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):Pr(s,a,u,c,d)}function Ur(t){return t<C?0:t-1>>>5<<5}var $r,Jr=function(t){function e(t){return null==t?Kr():Lt(t)?t:Kr().withMutations((function(e){var r=it(t);ke(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Kr()},e.prototype.set=function(t,e){return Wr(this,t,e)},e.prototype.remove=function(t){return Wr(this,t,N)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Vr(e,r,t,this.__hash):0===this.size?Kr():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(sr);function Vr(t,e,r,n){var o=Object.create(Jr.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o}function Kr(){return $r||($r=Vr(mr(),Rr()))}function Wr(t,e,r){var n,o,i=t._map,s=t._list,a=i.get(e),u=void 0!==a;if(r===N){if(!u)return t;s.size>=C&&s.size>=2*i.size?(n=(o=s.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=o.__ownerID=t.__ownerID)):(n=i.remove(e),o=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(r===s.get(a)[1])return t;n=i,o=s.set(a,[e,r])}else n=i.set(e,s.size),o=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=o,t.__hash=void 0,t):Vr(n,o)}Jr.isOrderedMap=Lt,Jr.prototype[pt]=!0,Jr.prototype.delete=Jr.prototype.remove;var Gr="@@__IMMUTABLE_STACK__@@";function Hr(t){return Boolean(t&&t[Gr])}var Xr=function(t){function e(t){return null==t?tn():Hr(t)?t:tn().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;for(t=J(this,t);r&&t--;)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Zr(e,r)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Hr(e))return e;ke(e.size);var r=this.size,n=this._head;return e.__iterate((function(t){r++,n={value:t,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Zr(r,n)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):tn()},e.prototype.slice=function(e,r){if(K(e,r,this.size))return this;var n=W(e,this.size);if(G(r,this.size)!==this.size)return t.prototype.slice.call(this,e,r);for(var o=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Zr(o,i)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Zr(this.size,this._head,t,this.__hash):0===this.size?tn():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new Ft(this.toArray()).__iterate((function(e,n){return t(e,n,r)}),e);for(var n=0,o=this._head;o&&!1!==t(o.value,n++,r);)o=o.next;return n},e.prototype.__iterator=function(t,e){if(e)return new Ft(this.toArray()).__iterator(t,e);var r=0,n=this._head;return new mt((function(){if(n){var e=n.value;return n=n.next,gt(t,r++,e)}return{value:void 0,done:!0}}))},e}(st);Xr.isStack=Hr;var Yr,Qr=Xr.prototype;function Zr(t,e,r,n){var o=Object.create(Qr);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function tn(){return Yr||(Yr=Zr(0))}Qr[Gr]=!0,Qr.shift=Qr.pop,Qr.unshift=Qr.push,Qr.unshiftAll=Qr.pushAll,Qr.withMutations=rr,Qr.wasAltered=ir,Qr.asImmutable=or,Qr["@@transducer/init"]=Qr.asMutable=nr,Qr["@@transducer/step"]=function(t,e){return t.unshift(e)},Qr["@@transducer/result"]=function(t){return t.asImmutable()};var en="@@__IMMUTABLE_SET__@@";function rn(t){return Boolean(t&&t[en])}function nn(t){return rn(t)&&dt(t)}function on(t,e){if(t===e)return!0;if(!Q(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||tt(t)!==tt(e)||rt(t)!==rt(e)||dt(t)!==dt(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!nt(t);if(dt(t)){var n=t.entries();return e.every((function(t,e){var o=n.next().value;return o&&$t(o[1],t)&&(r||$t(o[0],e))}))&&n.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var s=!0,a=e.__iterate((function(e,n){if(r?!t.has(e):o?!$t(e,t.get(n,N)):!$t(t.get(n,N),e))return s=!1,!1}));return s&&t.size===a}function sn(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function an(t){if(!t||"object"!=typeof t)return t;if(!Q(t)){if(!Fe(t))return t;t=At(t)}if(tt(t)){var e={};return t.__iterate((function(t,r){e[r]=an(t)})),e}var r=[];return t.__iterate((function(t){r.push(an(t))})),r}var un=function(t){function e(e){return null==e?pn():rn(e)&&!dt(e)?e:pn().withMutations((function(r){var n=t(e);ke(n.size),n.forEach((function(t){return r.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(it(t).keySeq())},e.intersect=function(t){return(t=ot(t).toArray()).length?fn.intersect.apply(e(t.pop()),t):pn()},e.union=function(t){return(t=ot(t).toArray()).length?fn.union.apply(e(t.pop()),t):pn()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return hn(this,this._map.set(t,t))},e.prototype.remove=function(t){return hn(this,this._map.remove(t))},e.prototype.clear=function(){return hn(this,this._map.clear())},e.prototype.map=function(t,e){var r=this;return hn(this,this._map.map((function(e){return t(e,e,r)}),e))},e.prototype.union=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(r){for(var n=0;n<e.length;n++)t(e[n]).forEach((function(t){return r.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return Fn(_e(this,t))},e.prototype.sortBy=function(t,e){return Fn(_e(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(at);un.isSet=rn;var cn,fn=un.prototype;function hn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function ln(t,e){var r=Object.create(fn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function pn(){return cn||(cn=ln(mr()))}fn[en]=!0,fn.delete=fn.remove,fn.merge=fn.concat=fn.union,fn.withMutations=rr,fn.asImmutable=or,fn["@@transducer/init"]=fn.asMutable=nr,fn["@@transducer/step"]=function(t,e){return t.add(e)},fn["@@transducer/result"]=function(t){return t.asImmutable()},fn.__empty=pn,fn.__make=ln;var dn,yn=function(t){function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if(Ae(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<t&&(n=-n),this._start=t,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-t)/n-1)+1),0===this.size){if(dn)return dn;dn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+J(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return K(t,r,this.size)?this:(t=W(t,this.size),(r=G(r,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,o=e?this._start+(r-1)*n:this._start,i=0;i!==r&&!1!==t(o,e?r-++i:i++,this);)o+=e?-n:n;return i},e.prototype.__iterator=function(t,e){var r=this.size,n=this._step,o=e?this._start+(r-1)*n:this._start,i=0;return new mt((function(){if(i===r)return{value:void 0,done:!0};var s=o;return o+=e?-n:n,gt(t,e?r-++i:i++,s)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:on(this,t)},e}(Dt);function _n(t,e,r){for(var n=De(e),o=0;o!==n.length;)if((t=Be(t,n[o++],N))===N)return r;return t}function vn(t,e){return _n(this,t,e)}function mn(t,e){return _n(t,e,N)!==N}function gn(){ke(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t}ot.isIterable=Q,ot.isKeyed=tt,ot.isIndexed=rt,ot.isAssociative=nt,ot.isOrdered=dt,ot.Iterator=mt,sn(ot,{toArray:function(){ke(this.size);var t=new Array(this.size||0),e=tt(this),r=0;return this.__iterate((function(n,o){t[r++]=e?[o,n]:n})),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return an(this)},toKeyedSeq:function(){return new oe(this,!0)},toMap:function(){return sr(this.toKeyedSeq())},toObject:gn,toOrderedMap:function(){return Jr(this.toKeyedSeq())},toOrderedSet:function(){return Fn(tt(this)?this.valueSeq():this)},toSet:function(){return un(tt(this)?this.valueSeq():this)},toSetSeq:function(){return new se(this)},toSeq:function(){return rt(this)?this.toIndexedSeq():tt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Xr(tt(this)?this.valueSeq():this)},toList:function(){return jr(tt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return we(this,de(this,t))},includes:function(t){return this.some((function(e){return $t(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){ke(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!t.call(e,n,o,i))return r=!1,!1})),r},filter:function(t,e){return we(this,he(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ke(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ke(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return we(this,ce(this,t,e))},reduce:function(t,e,r){return Sn(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Sn(this,t,e,r,arguments.length<2,!0)},reverse:function(){return we(this,fe(this,!0))},slice:function(t,e){return we(this,le(this,t,e,!0))},some:function(t,e){return!this.every(En(t),e)},sort:function(t){return we(this,_e(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return $(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=sr().asMutable();return t.__iterate((function(o,i){n.update(e.call(r,o,i,t),0,(function(t){return t+1}))})),n.asImmutable()}(this,t,e)},equals:function(t){return on(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Ft(t._cache);var e=t.toSeq().map(On).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(En(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,o,i){if(t.call(e,r,o,i))return n=[o,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(V,null,t)},flatMap:function(t,e){return we(this,function(t,e,r){var n=xe(t);return t.toSeq().map((function(o,i){return n(e.call(r,o,i,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return we(this,ye(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find((function(e,r){return $t(r,t)}),void 0,e)},getIn:vn,groupBy:function(t,e){return function(t,e,r){var n=tt(t),o=(dt(t)?Jr():sr()).asMutable();t.__iterate((function(i,s){o.update(e.call(r,i,s,t),(function(t){return(t=t||[]).push(n?[s,i]:i),t}))}));var i=xe(t);return o.map((function(e){return we(t,i(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,N)!==N},hasIn:function(t){return mn(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:ot(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:ot(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return $t(e,t)}))},keySeq:function(){return this.toSeq().map(In).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ve(this,t)},maxBy:function(t,e){return ve(this,e,t)},min:function(t){return ve(this,t?An(t):Dn)},minBy:function(t,e){return ve(this,e?An(e):Dn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return we(this,pe(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(En(t),e)},sortBy:function(t,e){return we(this,_e(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return we(this,function(t,e,r){var n=Se(t);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var s=0;return t.__iterate((function(t,o,a){return e.call(r,t,o,a)&&++s&&n(t,o,i)})),s},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var s=t.__iterator(2,o),a=!0;return new mt((function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var o=t.value,u=o[0],c=o[1];return e.call(r,c,u,i)?2===n?t:gt(n,u,c,t):(a=!1,{value:void 0,done:!0})}))},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(En(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=dt(t),r=tt(t),n=e?1:0;return function(t,e){return e=Jt(e,3432918353),e=Jt(e<<15|e>>>-15,461845907),e=Jt(e<<13|e>>>-13,5),e=Jt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Vt((e=Jt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+jn(Kt(t),Kt(e))|0}:function(t,e){n=n+jn(Kt(t),Kt(e))|0}:e?function(t){n=31*n+Kt(t)|0}:function(t){n=n+Kt(t)|0}),n)}(this))}});var wn=ot.prototype;wn[Y]=!0,wn[vt]=wn.values,wn.toJSON=wn.toArray,wn.__toStringMapper=ze,wn.inspect=wn.toSource=function(){return this.toString()},wn.chain=wn.flatMap,wn.contains=wn.includes,sn(it,{flip:function(){return we(this,ue(this))},mapEntries:function(t,e){var r=this,n=0;return we(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return we(this,this.toSeq().flip().map((function(n,o){return t.call(e,n,o,r)})).flip())}});var bn=it.prototype;bn[Z]=!0,bn[vt]=wn.entries,bn.toJSON=gn,bn.__toStringMapper=function(t,e){return ze(e)+": "+ze(t)},sn(st,{toKeyedSeq:function(){return new oe(this,!1)},filter:function(t,e){return we(this,he(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return we(this,fe(this,!1))},slice:function(t,e){return we(this,le(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=W(t,t<0?this.count():this.size);var n=this.slice(0,t);return we(this,1===r?n:n.concat(Ee(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return we(this,ye(this,t,!1))},get:function(t,e){return(t=J(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=J(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return we(this,function(t,e){var r=Se(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return t.__iterate((function(t){return(!i||!1!==r(e,i++,o))&&!1!==r(t,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=t.__iterator(1,n),s=0;return new mt((function(){return(!o||s%2)&&(o=i.next()).done?o:s%2?gt(r,s++,e):gt(r,s++,o.value,o)}))},r}(this,t))},interleave:function(){var t=[this].concat(Ee(arguments)),e=ge(this.toSeq(),Dt.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),we(this,r)},keySeq:function(){return yn(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return we(this,pe(this,t,e,!1))},zip:function(){var t=[this].concat(Ee(arguments));return we(this,ge(this,kn,t))},zipAll:function(){var t=[this].concat(Ee(arguments));return we(this,ge(this,kn,t,!0))},zipWith:function(t){var e=Ee(arguments);return e[0]=this,we(this,ge(this,t,e))}});var xn=st.prototype;function Sn(t,e,r,n,o,i){return ke(t.size),t.__iterate((function(t,i,s){o?(o=!1,r=t):r=e.call(n,r,t,i,s)}),i),r}function In(t,e){return e}function On(t,e){return[e,t]}function En(t){return function(){return!t.apply(this,arguments)}}function An(t){return function(){return-t.apply(this,arguments)}}function kn(){return Ee(arguments)}function Dn(t,e){return t<e?1:t>e?-1:0}function jn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}xn[et]=!0,xn[pt]=!0,sn(at,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),at.prototype.has=wn.includes,at.prototype.contains=at.prototype.includes,sn(kt,it.prototype),sn(Dt,st.prototype),sn(jt,at.prototype);var Fn=function(t){function e(t){return null==t?Tn():nn(t)?t:Tn().withMutations((function(e){var r=at(t);ke(r.size),r.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(it(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(un);Fn.isOrderedSet=nn;var zn,Mn=Fn.prototype;function Bn(t,e){var r=Object.create(Mn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Tn(){return zn||(zn=Bn(Kr()))}Mn[pt]=!0,Mn.zip=xn.zip,Mn.zipWith=xn.zipWith,Mn.__empty=Tn,Mn.__make=Bn;var Pn=function(t,e){var r,n=function(i){var s=this;if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(t),u=o._indices={};o._name=e,o._keys=a,o._defaultValues=t;for(var c=0;c<a.length;c++){var f=a[c];u[f]=c,o[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+qn(s)+\' with property "\'+f+\'" since that property name is part of the Record API.\'):Ln(o,f)}}this.__ownerID=void 0,this._values=jr().withMutations((function(t){t.setSize(s._keys.length),it(i).forEach((function(e,r){t.set(s._indices[r],e===s._defaultValues[r]?void 0:e)}))}))},o=n.prototype=Object.create(Rn);return o.constructor=n,n};Pn.prototype.toString=function(){for(var t,e=qn(this)+" { ",r=this._keys,n=0,o=r.length;n!==o;n++)e+=(n?", ":"")+(t=r[n])+": "+ze(this.get(t));return e+" }"},Pn.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&Nn(this).equals(Nn(t))},Pn.prototype.hashCode=function(){return Nn(this).hashCode()},Pn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Pn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},Pn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return Cn(this,r)}return this},Pn.prototype.remove=function(t){return this.set(t)},Pn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Cn(this,t)},Pn.prototype.wasAltered=function(){return this._values.wasAltered()},Pn.prototype.toSeq=function(){return Nn(this)},Pn.prototype.toJS=function(){return an(this)},Pn.prototype.entries=function(){return this.__iterator(2)},Pn.prototype.__iterator=function(t,e){return Nn(this).__iterator(t,e)},Pn.prototype.__iterate=function(t,e){return Nn(this).__iterate(t,e)},Pn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?Cn(this,e,t):(this.__ownerID=t,this._values=e,this)},Pn.isRecord=ht,Pn.getDescriptiveName=qn;var Rn=Pn.prototype;function Cn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function qn(t){return t._name||t.constructor.name||"Record"}function Nn(t){return Pt(t._keys.map((function(e){return[e,t.get(e)]})))}function Ln(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Ae(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}Rn[ft]=!0,Rn.delete=Rn.remove,Rn.deleteIn=Rn.removeIn=$e,Rn.getIn=vn,Rn.hasIn=wn.hasIn,Rn.merge=We,Rn.mergeWith=Ge,Rn.mergeIn=tr,Rn.mergeDeep=Qe,Rn.mergeDeepWith=Ze,Rn.mergeDeepIn=er,Rn.setIn=Le,Rn.update=Ve,Rn.updateIn=Ke,Rn.withMutations=rr,Rn.asMutable=nr,Rn.asImmutable=or,Rn[vt]=Rn.entries,Rn.toJSON=Rn.toObject=wn.toObject,Rn.inspect=Rn.toSource=function(){return this.toString()};var Un;!function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this._value=t,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(Un)return Un;Un=this}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return $t(this._value,t)},e.prototype.slice=function(t,r){var n=this.size;return K(t,r,n)?this:new e(this._value,G(r,n)-W(t,n))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return $t(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return $t(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},e.prototype.__iterator=function(t,e){var r=this,n=this.size,o=0;return new mt((function(){return o===n?{value:void 0,done:!0}:gt(t,e?n-++o:o++,r._value)}))},e.prototype.equals=function(t){return t instanceof e?$t(this._value,t._value):on(t)}}(Dt);function $n(t){const e=t.defaultValues||{},r=t.prototype;r._defaultValues={...r._defaultValues||{},...e};const n=Object.keys(r._defaultValues);r._keys=n,r._indices={};for(let t=0;t<n.length;t++){const e=n[t];r._indices[e]=t}n.forEach((t=>{Object.defineProperty(r,t,{get(){return this.get(t)},set(e){this.set(t,e)}})}))}class Jn extends(Pn({})){}class Vn extends Jn{static defaultValues={x:0,y:0};constructor(t){super(t)}scale(t,e){return this.withMutations((r=>{e||(e=t),r.set("x",this.x*t).set("y",this.y*e)}))}translate(t){let{x:e,y:r}=t;return this.withMutations((t=>{t.set("x",this.x+e).set("y",this.y+r)}))}translateX(t){return this.translate(new Vn({x:t,y:0}))}translateY(t){return this.translate(new Vn({x:0,y:t}))}distance(t){return Math.sqrt((t.x-this.x)**2+(t.y-this.y)**2)}rotate(t){n(t%90==0,"Only multiples of 90° allowed."),t%=360;const{x:e,y:r}=this;switch(t){case 0:return this;case 90:return this.set("x",r).set("y",-e);case 180:return this.set("x",-e).set("y",-r);case 270:return this.set("x",-r).set("y",e);default:throw new Error("Unsupported rotation")}}apply(t){const[e,r]=t.applyToVector([this.x,this.y]);return this.withMutations((t=>{t.set("x",e).set("y",r)}))}}$n(Vn);const Kn=Vn;class Wn extends Kn{static defaultValues={...Kn.defaultValues,intensity:.5};constructor(t){super(t)}}$n(Wn);class Gn extends(Pn({width:0,height:0})){scale(t){return this.withMutations((e=>{e.set("width",this.width*t).set("height",this.height*t)}))}ceil(){return this.withMutations((t=>{t.set("width",Math.ceil(this.width)).set("height",Math.ceil(this.height))}))}floor(){return this.withMutations((t=>{t.set("width",Math.floor(this.width)).set("height",Math.floor(this.height))}))}swapDimensions(){return this.withMutations((t=>{t.set("width",this.height).set("height",this.width)}))}apply(t){const[e,r]=t.applyToSize([this.width,this.height]);return this.withMutations((t=>{t.set("width",Math.abs(e)).set("height",Math.abs(r))}))}}class Hn extends Jn{static defaultValues={left:0,top:0,width:0,height:0};constructor(t){super(t)}get right(){return this.left+this.width}get bottom(){return this.top+this.height}static fromClientRect(t){let{top:e,left:r,width:n,height:o}=t;return new Hn({top:e,left:r,width:n,height:o})}static union(t){const e=t.map((t=>t.top)).min(),r=t.map((t=>t.bottom)).max()-e,n=t.map((t=>t.left)).min(),o=t.map((t=>t.right)).max()-n;return new Hn({left:n,top:e,width:o,height:r})}static getCenteredRect(t,e){return new Hn({left:(e.width-t.width)/2,top:(e.height-t.height)/2,width:t.width,height:t.height})}static fromInset(t){return new Hn({left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top})}translate(t){let{x:e,y:r}=t;return this.withMutations((t=>{t.set("left",this.left+e).set("top",this.top+r)}))}translateX(t){return this.set("left",this.left+t)}translateY(t){return this.set("top",this.top+t)}scale(t,e){return this.withMutations((r=>{e||(e=t),r.set("left",this.left*t).set("top",this.top*e).set("width",this.width*t).set("height",this.height*e)}))}grow(t){return this.withMutations((e=>{e.set("left",this.left-t).set("top",this.top-t).set("width",this.width+2*t).set("height",this.height+2*t)}))}getLocation(){return new Kn({x:this.left,y:this.top})}getSize(){return new Gn({width:this.width,height:this.height})}getCenter(){return new Kn({x:this.left+this.width/2,y:this.top+this.height/2})}setLocation(t){return this.withMutations((e=>{e.set("left",t.x).set("top",t.y)}))}roundOverlap(){return this.withMutations((t=>{t.set("left",Math.floor(this.left)).set("top",Math.floor(this.top)).set("width",Math.ceil(this.width)).set("height",Math.ceil(this.height))}))}round(){return this.withMutations((t=>{t.set("left",Math.round(this.left)).set("top",Math.round(this.top)).set("width",Math.round(this.width)).set("height",Math.round(this.height))}))}isPointInside(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom}isRectInside(t){return this.isPointInside(t.getLocation())&&this.isPointInside(t.getLocation().translate(new Kn({x:t.width,y:t.height})))}isRectOverlapping(t){return t.left<this.right&&t.right>this.left&&t.top<this.bottom&&t.bottom>this.top}normalize(){return this.withMutations((t=>t.set("left",this.width<0?this.left+this.width:this.left).set("top",this.height<0?this.top+this.height:this.top).set("width",Math.abs(this.width)).set("height",Math.abs(this.height))))}apply(t){const[e,r]=t.applyToVector([this.left,this.top]),[n,o]=t.applyToSize([this.width,this.height]);return this.withMutations((t=>t.set("left",e).set("top",r).set("width",n).set("height",o))).normalize()}}$n(Hn);const Xn=Hn;class Yn extends Jn{static defaultValues={a:1,b:0,c:0,d:0,e:1,f:0};static IDENTITY=new Yn;translate(t){let{x:e,y:r}=t;return this.transform(1,0,e,0,1,r)}translateX(t){return this.translate({x:t,y:0})}translateY(t){return this.translate({x:0,y:t})}scale(t,e){return e||(e=t),this.transform(t,0,0,0,e,0)}transform(t,e,r,n,o,i){const{a:s,b:a,c:u,d:c,e:f,f:h}=this;return this.withMutations((l=>l.set("a",t*s+e*c).set("b",t*a+e*f).set("c",t*u+e*h+r).set("d",n*s+o*c).set("e",n*a+o*f).set("f",n*u+o*h+i)))}rotate(t){n(t%90==0,"Only multiples of 90° allowed.");const e=(360-t)*Math.PI/180,r=Math.cos(e),o=Math.sin(e);return this.transform(r,-o,0,o,r,0)}rotateRad(t){const e=Math.cos(t),r=Math.sin(t);return this.transform(e,-r,0,r,e,0)}inverse(){const{a:t,b:e,c:r,d:n,e:o,f:i}=this,s=t*o-e*n;return this.withMutations((a=>a.set("a",o/s).set("b",-e/s).set("c",-(o*r-e*i)/s).set("d",-n/s).set("e",t/s).set("f",-(-r*n+t*i)/s)))}toCssValue(){const{a:t,b:e,c:r,d:n,e:o,f:i}=this;return`matrix(${t.toFixed(2)}, ${n.toFixed(2)}, ${e.toFixed(2)}, ${o.toFixed(2)}, ${r.toFixed(2)}, ${i.toFixed(2)})`}applyToVector(t){let[e,r]=t;const{a:n,b:o,c:i,d:s,e:a,f:u}=this;return[n*e+o*r+i,s*e+a*r+u]}applyToSize(t){let[e,r]=t;const n=this.applyToVector([0,0]),o=this.applyToVector([e,r]);return[o[0]-n[0],o[1]-n[1]]}}$n(Yn);class Qn extends(Pn({left:0,top:0,right:0,bottom:0})){static applyToRect(t,r){if(!(t instanceof Qn))throw new e("`inset` must be an instance of `PSPDFKit.Geometry.Inset`");if(!(r instanceof Xn))throw new e("`rect` must be an instance of `PSPDFKit.Geometry.Rect`");return new Xn({top:r.top+t.top,left:r.left+t.left,width:r.width-(t.left+t.right),height:r.height-(t.top+t.bottom)})}static fromRect(t){return new Qn({left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height})}static fromValue(t){if("number"!=typeof t)throw new e("The provided value must be a number");return new Qn({top:t,left:t,right:t,bottom:t})}apply(t){const e=t.applyToVector([this.left,this.top]),r=t.applyToVector([this.left,this.bottom]),n=t.applyToVector([this.right,this.top]),o=t.applyToVector([this.right,this.bottom]),i=Math.min(e[0],r[0],n[0],o[0]),s=Math.max(e[0],r[0],n[0],o[0]),a=Math.min(e[1],r[1],n[1],o[1]),u=Math.max(e[1],r[1],n[1],o[1]);return new Qn({left:i,right:s,top:a,bottom:u})}}class Zn extends Jn{static defaultValues={id:null,name:null,subject:null,pdfObjectId:null,pageIndex:null,boundingBox:new Xn,opacity:1,action:null,note:null,creatorName:null,createdAt:new Date(0),updatedAt:new Date(0),customData:null,noPrint:!1,noZoom:!1,noRotate:!1,noView:!1,hidden:!1,blendMode:"normal",additionalActions:null,isCommentThreadRoot:!1,group:void 0,isEditable:void 0,isDeletable:void 0,canSetGroup:void 0,canReply:void 0,APStreamCache:void 0};constructor(t){if(super(t),this.constructor===Zn)throw new e("PSPDFKit.Annotations.Annotation is an abstract base class and can not be instantiated")}}$n(Zn);const to=Zn;class eo extends(Pn({r:0,g:0,b:0})){static BLACK=new eo({r:0,g:0,b:0});static GREY=new eo({r:128,g:128,b:128});static WHITE=new eo({r:255,g:255,b:255});static DARK_BLUE=new eo({r:36,g:131,b:199});static RED=new eo({r:248,g:36,b:0});static PURPLE=new eo({r:255,g:0,b:255});static PINK=new eo({r:255,g:114,b:147});static GREEN=new eo({r:110,g:176,b:0});static ORANGE=new eo({r:243,g:149,b:0});static YELLOW=new eo({r:255,g:255,b:0});static LIGHT_BLUE=new eo({r:141,g:184,b:255});static LIGHT_RED=new eo({r:247,g:141,b:138});static LIGHT_GREEN=new eo({r:162,g:250,b:123});static LIGHT_YELLOW=new eo({r:252,g:238,b:124});static BLUE=new eo({r:34,g:147,b:251});static fromHex=t=>new eo({r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)});lighter(t){n("number"==typeof t&&t>=0&&t<=100,"Invalid `percent` value. Must be 0-100.");const e=255*t/100;let r=parseInt(this.r+e),o=parseInt(this.g+e),i=parseInt(this.b+e);return r=r<255?r:255,o=o<255?o:255,i=i<255?i:255,new eo({r,g:o,b:i})}darker(t){n("number"==typeof t&&t>=0&&t<=100,"Invalid `percent` value. Must be 0-100.");const e=255*t/100;let r=parseInt(this.r-e),o=parseInt(this.g-e),i=parseInt(this.b-e);return r=r>0?r:0,o=o>0?o:0,i=i>0?i:0,new eo({r,g:o,b:i})}equals(t){return n(t instanceof eo||"object"==typeof t,"Invalid `color` provided. It must be an instance of Color or an RGB object."),n("number"==typeof t.r&&t.r>=0&&t.r<=255,"Invalid `r` value provided. It must be an integer between 0 and 255."),n("number"==typeof t.g&&t.g>=0&&t.g<=255,"Invalid `g` value provided. It must be an integer between 0 and 255."),n("number"==typeof t.b&&t.b>=0&&t.b<=255,"Invalid `b` value provided. It must be an integer between 0 and 255."),this.r===t.r&&this.g===t.g&&this.b===t.b}saturate(t){n("number"==typeof t&&t>=0&&t<=100,"Invalid `percent` value. Must be 0-100.");const e=t/100,r=.3086*this.r+.6094*this.g+.082*this.b;return new eo({r:Math.round(this.r*e+r*(1-e)),g:Math.round(this.g*e+r*(1-e)),b:Math.round(this.b*e+r*(1-e))})}sRGBToRGBComponent(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}relativeLuminance(){const{r:t,g:e,b:r}={r:this.r/255,g:this.g/255,b:this.b/255},{R:n,G:o,B:i}={R:this.sRGBToRGBComponent(t),G:this.sRGBToRGBComponent(e),B:this.sRGBToRGBComponent(r)};return.2126*n+.7152*o+.0722*i}contrastRatio(t){return(this.relativeLuminance()+.05)/(t.relativeLuminance()+.05)}toCSSValue(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toHex(){let t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==r.length&&(r="0"+r),"#"+t+e+r}}class ro extends to{static readableName="Shape";static defaultValues={strokeWidth:5,strokeColor:eo.BLUE,fillColor:null,strokeDashArray:null,measurementPrecision:null,measurementScale:null};isMeasurement(){return null!==this.measurementScale}constructor(t){super(t)}}$n(ro);const no=ro;class oo extends no{static defaultValues={startPoint:new Kn,endPoint:new Kn,lineCaps:null};static readableName="Line";constructor(t){super(t)}}$n(oo);class io extends no{static defaultValues={points:jr(),lineCaps:null};static readableName="Polyline";constructor(t){super(t)}}$n(io);class so extends no{static defaultValues={points:jr(),cloudyBorderIntensity:null};static readableName="Polygon";constructor(t){super(t)}}$n(so);class ao extends no{static defaultValues={cloudyBorderIntensity:null,cloudyBorderInset:null};static readableName="Ellipse";constructor(t){super(uo(t))}}function uo(t){if(!t)return;const e={...t};if(Number(t.cloudyBorderIntensity)>0&&!t.cloudyBorderInset){const r=4.25*Number(t.cloudyBorderIntensity)+(t.strokeWidth||no.defaultValues.strokeWidth)/2;return e.cloudyBorderInset=Qn.fromValue(r),e}return e}$n(ao);class co extends no{static defaultValues={cloudyBorderIntensity:null,cloudyBorderInset:null};static readableName="Rectangle";constructor(t){super(uo(t))}}$n(co);var fo;!function(t){t[t.in=0]="in",t[t.mm=1]="mm",t[t.cm=2]="cm",t[t.pt=3]="pt",t[t.ft=4]="ft",t[t.m=5]="m",t[t.yd=6]="yd",t[t.km=7]="km",t[t.mi=8]="mi"}(fo||(fo={}));const ho="/create.pdf",lo="/save.pdf",po="/embedded.pdf",yo="WebAssembly/asm.js module not loaded.";let _o=null,vo=!1,mo=!1,go=null,wo=[],bo=null,xo=null;function So(t){return null!=t&&null!=t.length&&0===t.length}const Io=["configurePDFJavaScriptSupport","closeDocument","setFormValues","openDocument","saveDocument","importXFDF","importInstantDocumentJSON"];function Oo(t){n(_o,"WebAssembly/asm.js module not loaded.");for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];const i=r.map((t=>So(t)?JSON.stringify(t):t));Io.includes(t)&&Po();const s=_o[t](...i)||\'{ "success": true }\',a=JSON.parse(s);if(!a.success)throw new Error(a.error);return a}function Eo(t){n(_o,"WebAssembly/asm.js module not loaded.");for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];Io.includes(t)&&Po();const i=r.map((t=>So(t)?JSON.stringify(t):t)),s=_o[t](...i);return s}const Ao=["run_pdf_formatting_scripts","run_pdf_javascript","set_form_values_get_script_changes","edit_document","prepare_sign_invisible","sign","on_keystroke_event","save_document"];function ko(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(_o,"WebAssembly/asm.js module not loaded.");const r=JSON.stringify({type:t,...e});Ao.includes(t)&&Po();const o=_o.dispatchCommand(r);if(o.hasError()){const e=new Error(o.getErrorMessage()||"There was an error while executing the command: "+t);throw o.delete(),e}const i=[];for(let t=0;t<o.getRepliesCount();t++)o.hasJSONReply(t)&&i.push(JSON.parse(o.getJSONReply(t))),o.hasBinaryReply(t)&&i.push(o.getBinaryReply(t).slice(0));return o.delete(),i}function Do(t,e){return`${t}/${e}.pdf`}async function jo(t,e){const r=Math.random().toString(36).slice(-5),o=await Promise.all(Object.entries(e).map((async e=>{let[n,o]=e;return t.forEach((t=>{t.document===n&&"importDocument"===t.type?(!1===t.treatImportedDocumentAsOnePage&&(t.treatImportedDocumentAsOnePage=void 0),t.document=Do(r,n)):(t.dataFilePath===n&&"applyInstantJson"===t.type||t.dataFilePath===n&&"applyXfdf"===t.type)&&(t.dataFilePath=Do(r,n))})),{basename:n,buffer:await z(o)}})));return o.forEach((t=>{!function(t,e,r){n(_o,yo),_o.FS.analyzePath(t).exists||_o.FS.mkdir(t),_o.FS.writeFile(Do(t,e),r)}(r,t.basename,t.buffer)})),function(){o.forEach((t=>{!function(t,e){n(_o,yo),_o.FS.unlink(Do(t,e))}(r,t.basename)}))}}function Fo(){mo=!0;const t=Oo("configurePDFJavaScriptSupport",!0);return n(t.success,"An error occurred while executing the document level JavaScript."),t.changes||[]}function zo(t,e){let r;try{r=ko("edit_document",{save_path:e,operations:t})}catch(t){throw new Error(`Error applying operations to document: ${t.message}`)}return r}let Mo,Bo=null,To=!1;function Po(){To||(Bo=null,Mo=!1)}function Ro(t){To&&!t&&(To=!1,Bo&&qo(Bo)),To=t}function Co(){return null===Bo&&(Bo=ko("read_form_json_objects"),Mo=!1),Bo}function qo(t){let e;if(To){if(null===t)throw To=!1,new Error("Error enqueuing form JSON objects: form fields JSON is null.");return Bo&&!Mo&&(Mo=!0),void(Bo=t)}if(Mo||!To){try{Po(),e=ko("apply_form_json_objects",{form_fields_with_widgets:t})}catch(t){throw new Error("Error applying form JSON objects to /create.pdf: "+t.message)}return e}}function No(t,e,r,o,s,a){let u,c;n("number"==typeof t.pageIndex,"Annotation must have a pageIndex");try{if(n("number"==typeof t.pdfObjectId,"Cannot call renderAnnotation() for an annotation without pdfObjectId."),c=Eo("renderAnnotation",s,t.pdfObjectId,t.pageIndex,0,r,o,a||"normal"),c.hasError()||1!==c.getRepliesCount()){const t=c.getErrorMessage(),e=c.getErrorReason();throw new Error(e+": "+t)}u=c.getBinaryReply(0).slice(0)}catch(t){i(t.message)}finally{c&&c.delete()}return u}function Lo(t,e){let{width:r,height:n}=e;return"webp"===t&&(r>16383||n>16383)?"png":t}const Uo=new class{_pdfObjectIdsForIds={};loadNativeModule(t,e){let{disableWebAssembly:r,disableWebAssemblyStreaming:n,enableAutomaticLinkExtraction:i,overrideMemoryLimit:s}=e;return xo=Date.now(),vo=i,go=s,function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:self;return new Promise((async i=>{const s=!e&&k(n),a=D(t,r,s),u=s?await F(`${t}${I}`):await F(`${t}${E}`);o(`Using ${s?"WASM":"ASM.js"} method`),j(n);const c=await u(a);if(i({nativeModule:c}),void 0===n.crypto){const{FS:t}=c,e=function(){return 256*Math.random()|0};t.unlink("/dev/random"),t.unlink("/dev/urandom"),t.createDevice("/dev","random",e),t.createDevice("/dev","urandom",e)}}))}(t,r,n).then((t=>{let{nativeModule:e}=t;_o=e;const r=Oo("PSPDFKitVersion").version;if(1!==r)throw new Error(`Native version mismatch. Please update the dependencies. Expected 1 but got ${r}.`)}))}async load(t,e,r){let i,{mainThreadOrigin:s,customFonts:a,isSharePoint:u,isSalesforce:c}=r;n(_o,yo);try{const t=a?"/fonts":"";a&&!_o.FS.analyzePath(t).exists&&function(t,e){n(_o,yo),_o.FS.mkdir(e),_o.FS.mount(_o.FS.filesystems.WORKERFS,{blobs:t},e)}(a,t),i=_o.initPSPDFKit(null==e?"":e,s,t,"",u?"SPO":c?"SF":"")}catch(t){if(void 0===t.message&&l)return;throw t}const f=JSON.parse(i);if(xo&&o(`Native initialization complete, took: ${Date.now()-xo}ms`),!f.success)throw new Error("Failed to initialize PSPDFKit: "+f.error);return f}async openDocument(t,e,r){try{return n(_o,yo),null!==go&&Oo("overrideMemoryLimit",go),bo=e,_o.FS.writeFile(ho,new Uint8Array(t)),this.openAndReturnDocumentInfo(r)}finally{this._pdfObjectIdsForIds={}}}async reloadDocument(){try{return Oo("closeDocument"),this.openAndReturnDocumentInfo()}finally{this._pdfObjectIdsForIds={}}}async openAndReturnDocumentInfo(t){Oo("openDocument",ho,JSON.stringify({password:bo})),mo&&Fo(),Oo("automaticLinkExtraction",vo);const e=Oo("getDocumentInfo").documentInfo;if(e.pageCount<=0)return e;let r=[];if("number"==typeof t){const n=await this.getPageInfo(t);for(let o=0;o<e.pageCount;o++){const e={...n,pageIndex:o,pageLabel:t===o?n.pageLabel:String(o+1)};r.push(e)}}else r=await this.getAllPageInfos(e.pageCount);return e.pages=r,e}async getPageInfo(t){try{const e=ko("page_info",{query:"page_info",page:t});n(1===e.length,"expected page_info result to return 1 result when specifying index.");const r=R(e[0]);return JSON.parse(r).pageInfo}catch(e){return s(`Dimensional information for page ${t} unavailable, page will not be displayed.`),{height:0,matrix:[0,0,0,0,0,0],pageLabel:"",reverseMatrix:[0,0,0,0,0,0],transformedBBox:[0,0,0,0],untransformedBBox:[0,0,0,0],width:0,pageIndex:t,rawPdfBoxes:{bleedBox:null,cropBox:null,mediaBox:null,trimBox:null}}}}async getAllPageInfos(t){const e=[];try{const r=ko("page_info",{query:"page_info",page:"all"});n(r.length===t,"expected the same length of page info response to page count.");for(let t=0;t<r.length;t++){const n=R(r[t]),o=JSON.parse(n);e.push(o.pageInfo)}}catch(r){s("There was an error retrieving page information for all pages from core. Reverting to individual queries.");for(let r=0;r<t;r++)try{const t=ko("page_info",{query:"page_info",page:r});n(1===t.length,"expected page_info result to return 1 result when specifying index.");const o=R(t[0]),i=JSON.parse(o);e.push(i.pageInfo)}catch(t){s(`Dimensional information for page ${r} unavailable, page will not be displayed.`);const n={height:0,matrix:[0,0,0,0,0,0],pageLabel:"",reverseMatrix:[0,0,0,0,0,0],transformedBBox:[0,0,0,0],untransformedBBox:[0,0,0,0],width:0,pageIndex:r,rawPdfBoxes:{bleedBox:null,cropBox:null,mediaBox:null,trimBox:null}};e.push(n)}}return e}async enablePDFJavaScriptSupport(){return Fo()}async runPDFFormattingScripts(t,e){let r;n(mo,"PDF Formatting Scripts can only run after JavaScript is enabled.");try{r=ko("run_pdf_formatting_scripts",{form_fields:t,only_if_no_ap_stream:e})}catch(t){throw new Error("An error occurred while executing the document level JavaScript formatting.\\n\\n"+t.message)}return r[0].changes||[]}async openDocumentAt(){throw new Error("Should never be called")}async getBookmarks(){const t=ko("get_bookmarks");return n(1===t.length,"expected only one response for getBookmarks"),t[0].bookmarks||[]}async getFormJSON(){return Oo("getFormJSON").formJSON}async getFormValues(){return Oo("getFormValues").formValues}async setFormValues(t){const e=Co();let r=!1;const n=e.map((e=>{const n=t.find((t=>t.name===e.formField.name));return n?n.value===e.value||Array.isArray(n.value)&&Array.isArray(e.value)&&n.value.every(((t,r)=>t===e.value[r]))?e:(r=!0,{...e,value:n.value}):e}));r&&qo(n)}async setFormFieldValue(t){await this.setFormValues([t])}async applyOperations(t,e){const r=await jo(t,e),n=zo(t,ho);return r(),n}async exportPDFWithOperations(t,e){const r=await jo(t,e);let o;n(_o,yo);try{zo(t,lo),o=_o.FS.readFile(lo).buffer}catch(t){throw new Error("Error applying operations: "+t.message)}return r(),o}async getSignaturesInfo(){try{return ko("get_signatures",{certificate_check_time:"current_time"})[0]}catch(t){throw new Error(`Error getting signatures info: ${t.message}`)}}async prepareSignInvisible(t,e){let r;try{r=ko("get_signatures",{certificate_check_time:"current_time"})[0];const t="not_signed"!==r.status;Oo("saveDocument",lo,!1,t,false,false,"pdf",!1),Oo("openDocument",lo,JSON.stringify({password:bo}))}catch(t){throw new Error(`Error saving document backup for invisible signing: ${t}`)}try{const t=!e&&"not_signed"!==r.status;Oo("saveDocument",ho,e,t,false,false,"pdf",!1),e&&(Oo("openDocument",ho,JSON.stringify({password:bo})),mo&&Fo())}catch(t){throw new Error(`Error saving document for invisible signing: ${t}`)}let o;try{o=ko("prepare_sign_invisible",{signer_data_source:{...t,type:"pspdfkit/signer-data-source"},signature_metadata:{type:"pspdfkit/signature-metadata"}})}catch(t){throw new Error(`Error preparing document for invisible signing: ${t}`)}n(_o,yo);const i=_o.FS.readFile(o[0].result.file_contents).buffer;return _o.FS.unlink(o[0].result.file_contents),{file:o[0].result.file,hash:o[0].result.hash,signatureFormFieldName:o[0].result.signature_form_fqn,dataToBeSigned:o[0].result.data_to_be_signed,fileContents:i}}async sign(t,e,r){let n;try{n=ko("sign",{password:bo,save_path:ho,file_path:t,signature_form_fqn:e,pkcs7_container:r}),Oo("openDocument",ho,JSON.stringify({password:bo})),mo&&Fo()}catch(t){throw new Error(`Error signing document: ${t}`)}return n[0].result}async restoreToOriginalState(){try{Oo("openDocument",lo,JSON.stringify({password:bo})),mo&&Fo();const t="not_signed"!==ko("get_signatures",{certificate_check_time:"current_time"})[0].status;Oo("saveDocument",ho,!1,t,!1,!1,"pdf",!1),Oo("openDocument",ho,JSON.stringify({password:bo})),mo&&Fo()}catch(t){throw new Error(`Could not restore backup document: ${t}`)}}async evalFormValuesActions(t){const e=ko("set_form_values_get_script_changes",{form_values:t});return n(1===e.length,"expected only one response for evalFormValuesActions"),e[0].changes}async readFormJSONObjects(){return Co()}async setFormJSONUpdateBatchMode(t){await Ro(t)}async evalScript(t,e){const r=ko("run_pdf_javascript",{pdf_javascript_contents:t,pdf_javascript_form_fqn:e});return n(1===r.length,"expected only one response for evalScript"),r[0].changes}async closeDocument(){try{return wo=[],bo=null,mo=!1,Oo("closeDocument")}finally{this._pdfObjectIdsForIds={}}}async renderTile(t,e,r,o,i,s,a,u){n(_o,yo);const c=ko("render_tile",{render_annotations:Boolean(s||a),print_rendering:o,page:t,bitmap_width:r.width,bitmap_height:r.height,bitmap_x:r.left,bitmap_y:r.top,page_width:e.width,page_height:e.height,format:Lo(u,{width:r.width,height:r.height}),render_text:i});if("bitmap"===u)return c[0];const f=new Blob([c[0]],{type:`image/${u}`});return URL.createObjectURL(f)}async renderAnnotation(t,e,r,n,o,i){return No({...t,pdfObjectId:this._getPdfObjectIdForObject(t)},e&&await z(e),r,n,o,i)}async renderPageAnnotations(t,e,r,n,o){return e.map(((e,i)=>No({pdfObjectId:e,pageIndex:t},0,r[i],n[i],Lo(o,{width:r[i],height:n[i]}))))}async renderDetachedAnnotation(t,e,r,o,i){n(_o,yo);const s=e?await z(e):null,a=e?e.type:null;let u,c;const f=new _o.VectorUint8;try{if(null!=s)for(let t=0;t<s.byteLength;t++)f.push_back(s[t]);if(c=Eo("renderDetachedAnnotation",i,JSON.stringify({...t,pdfObjectId:this._getPdfObjectIdForObject(t),pageIndex:0}),0,r,o,f,a||""),c.hasError()||1!==c.getRepliesCount()){const t=c.getErrorMessage(),e=c.getErrorReason();throw new Error(e+": "+t)}u=c.getBinaryReply(0).slice(0)}finally{f&&f.delete(),c&&c.delete()}return u}async loadCertificates(t){if(ko("load_certificates",{certificates:t}).length>0)throw new e("Internal error while loading certificates")}async getAttachment(t){let e,r,n;const o=await this.getEmbeddedFilesList(),i=null==o?void 0:o.map((t=>t.id)),s=null==i?void 0:i.includes(t);try{if(s)ko("extract_embedded_file",{id:t,file_path:po}),e=_o.FS.readFile(po).buffer;else{if(r=Eo("getAnnotationAttachment",t),r.hasError()||1!==r.getRepliesCount()){const t=r.getErrorMessage(),e=r.getErrorReason();throw new Error("Error fetching attachment: "+e+", "+t)}n=JSON.parse(r.getJSONReply(0)).encoding,e=r.getBinaryReply(0).slice(0)}}finally{var a;null!==(a=_o.FS.analyzePath(po))&&void 0!==a&&a.exists&&_o.FS.unlink(po),r&&r.delete()}return[e,n]}async textForPageIndex(t){return Oo("textForPageIndex",t).textBlocks}async annotationsForPageIndex(t){const e=await Oo("annotationsForPageIndex",t);return["rollover","down"].forEach((t=>{var r,n;null===(r=e.apstream_variants)||void 0===r||null===(n=r[t])||void 0===n||n.forEach((r=>{const n=e.annotations.find((t=>t.pdfObjectId===r));n?n[t]=!0:e.annotations.push({pdfObjectId:r,[t]:!0})}))})),e.annotations}async createAnnotation(t,e){n(_o,yo),n("number"==typeof t.pageIndex,"Annotation must have a pageIndex");const r=t.pdfObjectId,o=e?await z(e):null;let i;const s=new _o.VectorUint8;try{if(null!=o)for(let t=0;t<o.byteLength;t++)s.push_back(o[t]);"pspdfkit/widget"===t.type&&(Ro(!1),Po()),i=Oo("createAnnotation",JSON.stringify({...t,pdfObjectId:null}),s)}finally{s&&s.delete()}return"number"==typeof r&&"number"==typeof this._pdfObjectIdsForIds[r.toString()]&&delete this._pdfObjectIdsForIds[r.toString()],this._pdfObjectIdsForIds[t.id||i.pdfObjectId.toString()]=i.pdfObjectId,i.pdfObjectId}async updateAnnotation(t){const e={...t,pdfObjectId:this._getPdfObjectIdForObject(t)};if(n(e.id,"Annotation must have an ID"),n("number"==typeof e.pageIndex,"Annotation must have a pageIndex"),"pspdfkit/widget"===e.type){const t=Co(),r="number"==typeof e.pdfObjectId?e.pdfObjectId.toString():e.id;qo(t.map((t=>t.formField.annotationIds.includes(r)||t.formField.annotationIds.includes(String(e.pdfObjectId))?{...t,widgets:t.widgets.map((t=>t.id===r||String(t.pdfObjectId)===r?e:t))}:t)))}else Oo("updateAnnotation",JSON.stringify(e),0,0)}async deleteAnnotation(t){if(t.APStreamCache&&await this.updateAnnotation(t),"pspdfkit/widget"===t.type)try{const e=t.id;qo(Co().map((r=>{if(r.formField.annotationIds.includes(e)||r.formField.annotationIds.includes(String(t.pdfObjectId))){let t;if(("pspdfkit/form-field/checkbox"===r.formField.type||"pspdfkit/form-field/radio"===r.formField.type)&&r.formField.options.length===r.formField.annotationIds.length){const n=r.formField.annotationIds.indexOf(e);t=r.formField.options.filter(((t,e)=>e!==n))}const n=r.widgets.filter((t=>e!==(t.id||String(t.pdfObjectId)))),o=r.formField.annotationIds.filter((t=>t!==e));return n.length>0&&o.length>0?{...r,formField:{...r.formField,annotationIds:o,...t?{options:t}:null},widgets:n}:null}return r})).filter(Boolean))}catch(t){throw t}else try{ko("remove_annotations",{annotation_ids:[this._getPdfObjectIdForObject(t)]})}catch(e){i(`Removing annotation failed for annotation: ${JSON.stringify(t)}`)}delete this._pdfObjectIdsForIds[t.id||t.pdfObjectId.toString()]}async createFormField(t,e){qo(Co().concat([{type:"pspdfkit/form-field-with-widgets",formField:t,widgets:e}]));const r=Co().find((e=>e.formField.name===t.name));if(!r)throw new Error(`Error creating new form field in /create.pdf: created form field not found. ${JSON.stringify({type:"pspdfkit/form-field-with-widgets",formField:t,widgets:e})}`);r.widgets.forEach((t=>{this._pdfObjectIdsForIds[t.id]=t.pdfObjectId}))}async updateFormField(t,e){const r=Co(),n=r.find((e=>e.formField.name===t.name));if(!n)throw new Error(`Error updating form field with name "${t.name}" in /create.pdf: form field not found. ${JSON.stringify(r)}`);qo(r.map((r=>{if(r.formField.name===t.name){const n={type:"pspdfkit/form-field-with-widgets",formField:{...r.formField,...t},widgets:e.reduce(((t,e)=>[...t,{...r.widgets.find((t=>t.id===e.id||t.pdfObjectId===e.pdfObjectId)),...e}]),[]),...void 0!==r.value?{value:r.value}:null};return t.flags||delete n.formField.flags,n}return r})));if(!Co().find((e=>e.formField.name===t.name)))throw new Error(`Error updating form field "${t.name}" in /create.pdf: updated form field not found. ${JSON.stringify({type:"pspdfkit/form-field-with-widgets",formField:t,widgets:e})}`);n.widgets.forEach((t=>{e.some((e=>e.id===t.id))||delete this._pdfObjectIdsForIds[t.id]}))}async deleteFormField(t){const e=Co(),r=e.find((e=>e.formField.name===t.name));if(!r)return;qo(e.filter((e=>e.formField.name!==t.name)));const n=Co().find((e=>e.formField.name===t.name));if(n)throw new Error(`Error deleting form field with name "${t.name}" in /create.pdf: form field still present. ${JSON.stringify(n)}`);r.widgets.forEach((t=>{delete this._pdfObjectIdsForIds[t.id]}))}async deleteFormFieldValue(t){qo(Co().map((e=>e.formField.name===t?{formField:e.formField,widgets:e.widgets,type:e.type}:e)))}async createBookmark(t){try{ko("append_bookmarks",{bookmarks:[t]})}catch(t){throw new Error(`Error creating new bookmark in /create.pdf: ${t.message}`)}}async updateBookmark(t){try{var e;ko("remove_bookmarks",{bookmarkIds:[null!==(e=t.id)&&void 0!==e?e:t.pdfBookmarkId]}),ko("append_bookmarks",{bookmarks:[t]})}catch(t){throw new Error(`Error updating bookmark in /create.pdf: ${t.message}`)}}async deleteBookmark(t){try{ko("remove_bookmarks",{bookmarkIds:[t]})}catch(t){throw new Error(`Error deleting bookmark in /create.pdf: ${t.message}`)}}async getTextFromRects(t,e){return Oo("getTextFromRects",t,JSON.stringify(e.map((t=>[t.left,t.top,t.width,t.height])))).text}async search(t,e,r,n){return ko("search",{query:t,start_index:e,limit:r,case_sensitive:n,search_type:arguments.length>4&&void 0!==arguments[4]?arguments[4]:M})}async parseXFDF(t){const e=new _o.VectorUint8;try{const r=new Uint8Array(function(t){const e=new ArrayBuffer(2*t.length),r=new Uint16Array(e);for(let e=0,n=t.length;e<n;e++)r[e]=t.charCodeAt(e);return e}(t));for(let t=0;t<r.byteLength;t++)e.push_back(r[t]);const n=await _o.dispatchCommandWithBinary(JSON.stringify({type:"convert_xfdf_to_instant_json"}),e);if(n.hasError()){const t=new Error(n.getErrorMessage()||"There was an error while executing the command: convert_xfdf_to_instant_json");throw n.delete(),t}const o=[];for(let t=0;t<n.getRepliesCount();t++)n.hasBinaryReply(t)&&o.push(n.getBinaryReply(t).slice(0));const i=function(t){let e="";const r=new Uint8Array(t),n=r.byteLength;for(let t=0;t<n;t++)e+=String.fromCharCode(r[t]);return e}(o[0].buffer);return n.delete(),JSON.parse(i)}catch(t){throw t}}async getEmbeddedFilesList(){return ko("list_embedded_files")[0].embeddedFiles||null}async getMeasurementSnappingPoints(t){const e=ko("get_snapping_points",{page:t});return e[0].snappingPoints?function(t){const e=[...t.endpoints,...t.intersections,...t.midpoints],r=[];for(let t=0;t<e.length;t+=2){const n=[e[t],e[t+1]];r.push(n)}return r.sort(((t,e)=>t[0]==e[0]?t[1]-e[1]:t[0]-e[0]))}(e[0].snappingPoints):null}async exportFile(t,e,r,o,i,s){let a={mimeType:"application/pdf",extension:"pdf"};try{const n=ko("save_document",{file_path:lo,format:o,flatten_annotations:t,save_incrementally:e,apply_redactions:!1,save_for_printing:r,remove_all_annotations:i,preserve_change_tracker_state:s})[0];n.format&&(a={mimeType:n.format.mime_type,extension:n.format.extension})}catch(t){throw new Error(`Error saving to /save.pdf: ${t.message}`)}n(_o,yo);return[_o.FS.readFile(lo).buffer,a]}async importXFDF(t,e){wo.push({source:t,keepCurrentAnnotations:e}),e||function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push("pspdfkit/widget"),Oo("removeAllAnnotations",JSON.stringify(t),JSON.stringify(e))}(),Oo("importXFDF",t)}async exportXFDF(){return Oo("exportXFDF",[],[]).XFDF}async importInstantJSON(t){Oo("importInstantDocumentJSON",JSON.stringify(t))}async exportInstantJSON(){const t=Oo("exportInstantDocumentJSON");return JSON.parse(t.InstantDocumentJSON)}async getDocumentOutline(){const t=ko("get_outline");return n(1===t.length,"expected only one response for getDocumentOutline"),t[0].outline||[]}async onKeystrokeEvent(t){const e=ko("on_keystroke_event",{pdf_javascript_event:t});n(1===e.length,"expected only one response for onKeystrokeEvent");const r=e[0].changes||[];return n(r.length>0&&4===r[0].change_type,"expected onKeystrokeEvent to return at least one JavaScript Event change."),r}async version(){return Oo("PSPDFKitVersion").version}getImportedXFDF(){return wo}async applyRedactions(){try{return Oo("saveDocument",ho,!1,!1,!0,!1,"pdf",!1)||{}}catch(t){throw new Error(`Error applying redactions and saving to /create.pdf: ${t.message}`)}}async clearAPStreamCache(){Oo("clearAPStreamCache")}comparisonDocuments={};lastOpenedComparisonDocument=null;async setComparisonDocument(t,e){this.comparisonDocuments[t]=e||(await this.exportFile(!1,!1,!1,"pdf",!1,!1))[0]}async openComparisonDocument(t){return n(this.comparisonDocuments[t]),t===this.lastOpenedComparisonDocument||t===B&&null===this.lastOpenedComparisonDocument&&this.persistedOpenDocument instanceof ArrayBuffer?null:(this.lastOpenedComparisonDocument=t,this.openDocument(this.comparisonDocuments[t],this.persistedOpenDocument===t?this.persistedOpenDocumentPassword:void 0))}async documentCompareAndOpen(t){n(this.comparisonDocuments[B]&&this.comparisonDocuments[T],"One or both comparison input documents are missing.");const e=`${B}.pdf`,r=`${T}.pdf`;_o.FS.writeFile(e,new Uint8Array(this.comparisonDocuments[B])),_o.FS.writeFile(r,new Uint8Array(this.comparisonDocuments[T]));return ko("comparison",{documentA:{strokeColor:t.documentA.strokeColor,pageIndex:t.documentA.pageIndex,filePath:e},documentB:{strokeColor:t.documentB.strokeColor,pageIndex:t.documentB.pageIndex,filePath:r},options:{...t.options,outputFilePath:"output.pdf"}}),await this.closeDocument(),this.comparisonDocuments[P]=_o.FS.readFile("output.pdf").buffer,this.lastOpenedComparisonDocument=P,this.openDocument(this.comparisonDocuments[P],void 0)}persistedOpenDocument=null;async persistOpenDocument(t){if(t)this.persistedOpenDocument=t;else try{this.persistedOpenDocument=(await this.exportFile(!1,!1,!1,"pdf",!1,!0))[0]}catch(t){throw new Error(`Error trying to persist a copy of the currently opened document: ${t.message}`)}this.persistedOpenDocumentPassword=bo}async cleanupDocumentComparison(){n(this.persistedOpenDocument,"No persisted previous document key or array buffer is available.");const t=this.persistedOpenDocument instanceof ArrayBuffer?this.persistedOpenDocument:this.comparisonDocuments[this.persistedOpenDocument];n(t,"No persisted previous array buffer is available.");try{await this.closeDocument()}catch(t){throw new Error(`Error trying to close the current document: ${t.message}`)}const e=this.openDocument(t,this.persistedOpenDocumentPassword);return this.persistedOpenDocument=null,this.persistedOpenDocumentPassword=null,this.lastOpenedComparisonDocument=null,this.comparisonDocuments={},e}_getPdfObjectIdForObject(t){return"number"==typeof t.pdfObjectId?t.pdfObjectId:this._pdfObjectIdsForIds[t.id]}async contentEditorEnter(){ko("content_editing/enter")}async contentEditorExit(){ko("content_editing/exit")}async contentEditorGetTextBlocks(t){const e=ko("content_editing/get_text_blocks",{pageIndex:t});return n(1===e.length,"expected only one response for getTextBlocks"),e[0]}async contentEditorRenderTextBlock(t,e,r){const o=ko("content_editing/render_text_block",{textBlockId:t,renderTextBlockParams:e,externalControlState:r});return n(2===o.length,"expected only two responses for renderTextBlock. ArrayBuffer and Size info."),{imageBuffer:o[1],displayRect:o[0].displayRect}}async contentEditorSetTextBlockCursor(t,e,r,o){const i=ko("content_editing/set_cursor",{textBlockId:t,offset:e,selectText:r,externalControlState:o});return n(1===i.length,"expected only one response for setTextBlockCursor"),i[0]}async contentEditorMoveTextBlockCursor(t,e,r,o){const i=ko("content_editing/move_cursor",{textBlockId:t,movement:e,selectText:r,externalControlState:o});return n(1===i.length,"expected only one response for moveTextBlockCursor"),i[0]}async contentEditorInsertTextBlockString(t,e,r){const o=ko("content_editing/insert_text",{textBlockId:t,text:e,externalControlState:r});return n(1===o.length,"expected only one response for insertTextBlockString"),o[0]}async contentEditorDeleteTextBlockString(t,e,r){const o=ko("content_editing/delete_cluster",{textBlockId:t,direction:e,externalControlState:r});return n(1===o.length,"expected only one response for deleteTextBlockString"),o[0]}async contentEditorSetTextBlockSelection(t,e,r){const o=ko("content_editing/set_selection",{textBlockId:t,mode:e,externalControlState:r});return n(1===o.length,"expected only one response for setTextBlockSelection"),o[0]}async contentEditorSetTextBlockSelectionRange(t,e,r,o,i){const s=ko("content_editing/set_selection_range",{textBlockId:t,begin:e,end:r,mode:o,externalControlState:i});return n(1===s.length,"expected only one response for setTextBlockSelection"),s[0]}async contentEditorTextBlockUndo(t,e){const r=ko("content_editing/undo",{textBlockId:t,externalControlState:e});return n(1===r.length,"expected only one response for textBlockUndo"),r[0]}async contentEditorTextBlockRedo(t,e){const r=ko("content_editing/redo",{textBlockId:t,externalControlState:e});return n(1===r.length,"expected only one response for textBlockRedo"),r[0]}async contentEditorTextBlockApplyFormat(t,e,r){const o=ko("content_editing/apply_format",{textBlockId:t,formatModifications:e,externalControlState:r});return n(1===o.length,"expected only one response for textBlockApplyFormat"),o[0]}async contentEditorGetAvailableFaces(){const t=ko("content_editing/available_faces");return n(1===t.length,"expected only one response for available_faces"),t[0]}async contentEditorResolveFace(t,e){const r=ko("content_editing/resolve_face",{family:t,variant:e});return n(1===r.length,"expected only one response for resolve_face"),r[0].faceId}async contentEditorSave(t){let e;try{e=ko("content_editing/save_to_document",{path:ho,textBlockSaveInfos:t})}catch(t){throw new Error(`Error saving to /save.pdf: ${t.message}`)}return e}},$o=self;if($o.global=$o,$o.module={},void 0===$o.performance){const t=Date.now();$o.performance={now:()=>Date.now()-t}}$o.onmessage=async t=>{let e,{data:r}=t,n=null;try{const t=await Uo[r.action](...r.args);if(e={id:r.id,result:t},Array.isArray(t)){const e=t.filter((t=>t instanceof ArrayBuffer));e.length>0&&(n=e)}t instanceof ArrayBuffer&&(n=[t])}catch(t){const o=r.args.filter((t=>t instanceof ArrayBuffer));o.length>0&&(n=o),e={id:r.id,error:t.message||t.toString(),callArgs:r.args}}$o.postMessage(e,n||void 0)}})()})();',null)}},69855:t=>{"use strict";var e=window.URL||window.webkitURL;t.exports=function(t,r){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(e.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!r)throw Error("Inline worker is not supported");return new Worker(r)}}}}]);